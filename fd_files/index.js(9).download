!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=9)}([function(e){e.exports=JSON.parse('{"name":"@ali/dataphant-universal","version":"3.4.5","description":"dataphant abtest jssdk for browser","main":"lib/index.js","module":"es/index.js","author":"qingsong.xqs","files":["build","dist","es","lib"],"keywords":["dataphant","abtest","jssdk","typescript"],"engines":{"npm":">=3.0.0"},"scripts":{"start":"build-scripts start","build":"build-scripts build","eslint":"eslint --ext .js,.jsx,.ts,.tsx ./","eslint:fix":"npm run eslint -- --fix","stylelint":"stylelint \\"**/*.{css,scss,less}\\"","lint":"npm run eslint && npm run stylelint","test":"jest"},"dependencies":{"@ali/dataphant-core":"^3.4.4","@ali/lib-mtop":"^2.6.1","@ali/wpk-reporter":"^1.1.2","cookie":"^0.4.1","isomorphic-fetch":"^3.0.0"},"devDependencies":{"@alib/build-scripts":"^0.1.0","@iceworks/spec":"^1.0.0","@types/jest":"^28.1.5","@types/rax":"^1.0.0","babel-jest":"^28.1.3","build-plugin-component":"^1.0.0","driver-universal":"^3.1.0","eslint":"^6.8.0","jest":"^28.1.2","jest-environment-jsdom":"^28.1.3","rax":"^1.1.0","rax-test-renderer":"^1.0.0","stylelint":"^13.7.2","ts-jest":"^28.0.6","typescript":"^3.7.3"},"repository":{"type":"git","url":"git@gitlab.alibaba-inc.com:icbu-data-center/dataphant-abtest-jssdk.git"},"publishConfig":{"registry":"https://registry.npm.alibaba-inc.com"},"license":"MIT","homepage":"https://unpkg.alibaba-inc.com/@ali/dataphant-universal@3.4.0/build/index.html"}')},function(e,t,r){(function(e){var n,o=function(e){"use strict";var t=1e7,r=9007199254740992,n=f(r),i="0123456789abcdefghijklmnopqrstuvwxyz",a="function"==typeof BigInt;function s(e,t,r,n){return void 0===e?s[0]:void 0!==t&&(10!=+t||r)?H(e,t,r,n):X(e)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function c(e){this.value=e,this.sign=e<0,this.isSmall=!0}function p(e){this.value=e}function l(e){return-r<e&&e<r}function f(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function d(e){h(e);var r=e.length;if(r<4&&C(e,n)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function g(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function v(e){return e>0?Math.floor(e):Math.ceil(e)}function y(e,r){var n,o,i=e.length,a=r.length,s=new Array(i),u=0,c=t;for(o=0;o<a;o++)u=(n=e[o]+r[o]+u)>=c?1:0,s[o]=n-u*c;for(;o<i;)u=(n=e[o]+u)===c?1:0,s[o++]=n-u*c;return u>0&&s.push(u),s}function m(e,t){return e.length>=t.length?y(e,t):y(t,e)}function w(e,r){var n,o,i=e.length,a=new Array(i),s=t;for(o=0;o<i;o++)n=e[o]-s+r,r=Math.floor(n/s),a[o]=n-r*s,r+=1;for(;r>0;)a[o++]=r%s,r=Math.floor(r/s);return a}function _(e,r){var n,o,i=e.length,a=r.length,s=new Array(i),u=0,c=t;for(n=0;n<a;n++)(o=e[n]-u-r[n])<0?(o+=c,u=1):u=0,s[n]=o;for(n=a;n<i;n++){if(!((o=e[n]-u)<0)){s[n++]=o;break}o+=c,s[n]=o}for(;n<i;n++)s[n]=e[n];return h(s),s}function b(e,r,n){var o,i,a=e.length,s=new Array(a),p=-r,l=t;for(o=0;o<a;o++)i=e[o]+p,p=Math.floor(i/l),i%=l,s[o]=i<0?i+l:i;return"number"==typeof(s=d(s))?(n&&(s=-s),new c(s)):new u(s,n)}function x(e,r){var n,o,i,a,s=e.length,u=r.length,c=g(s+u),p=t;for(i=0;i<s;++i){a=e[i];for(var l=0;l<u;++l)n=a*r[l]+c[i+l],o=Math.floor(n/p),c[i+l]=n-o*p,c[i+l+1]+=o}return h(c),c}function E(e,r){var n,o,i=e.length,a=new Array(i),s=t,u=0;for(o=0;o<i;o++)n=e[o]*r+u,u=Math.floor(n/s),a[o]=n-u*s;for(;u>0;)a[o++]=u%s,u=Math.floor(u/s);return a}function S(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function O(e,t){var r=Math.max(e.length,t.length);if(r<=30)return x(e,t);r=Math.ceil(r/2);var n=e.slice(r),o=e.slice(0,r),i=t.slice(r),a=t.slice(0,r),s=O(o,a),u=O(n,i),c=O(m(o,n),m(a,i)),p=m(m(s,S(_(_(c,s),u),r)),S(u,2*r));return h(p),p}function R(e,r,n){return new u(e<t?E(r,e):x(r,f(e)),n)}function T(e){var r,n,o,i,a=e.length,s=g(a+a),u=t;for(o=0;o<a;o++){n=0-(i=e[o])*i;for(var c=o;c<a;c++)r=i*e[c]*2+s[o+c]+n,n=Math.floor(r/u),s[o+c]=r-n*u;s[o+a]=n}return h(s),s}function A(e,t){var r,n,o,i,a=e.length,s=g(a);for(o=0,r=a-1;r>=0;--r)o=(i=1e7*o+e[r])-(n=v(i/t))*t,s[r]=0|n;return[s,0|o]}function I(e,r){var n,o=X(r);if(a)return[new p(e.value/o.value),new p(e.value%o.value)];var i,l=e.value,y=o.value;if(0===y)throw new Error("Cannot divide by zero");if(e.isSmall)return o.isSmall?[new c(v(l/y)),new c(l%y)]:[s[0],e];if(o.isSmall){if(1===y)return[e,s[0]];if(-1==y)return[e.negate(),s[0]];var m=Math.abs(y);if(m<t){i=d((n=A(l,m))[0]);var w=n[1];return e.sign&&(w=-w),"number"==typeof i?(e.sign!==o.sign&&(i=-i),[new c(i),new c(w)]):[new u(i,e.sign!==o.sign),new c(w)]}y=f(m)}var b=C(l,y);if(-1===b)return[s[0],e];if(0===b)return[s[e.sign===o.sign?1:-1],s[0]];n=l.length+y.length<=200?function(e,r){var n,o,i,a,s,u,c,p=e.length,l=r.length,f=t,h=g(r.length),v=r[l-1],y=Math.ceil(f/(2*v)),m=E(e,y),w=E(r,y);for(m.length<=p&&m.push(0),w.push(0),v=w[l-1],o=p-l;o>=0;o--){for(n=f-1,m[o+l]!==v&&(n=Math.floor((m[o+l]*f+m[o+l-1])/v)),i=0,a=0,u=w.length,s=0;s<u;s++)i+=n*w[s],c=Math.floor(i/f),a+=m[o+s]-(i-c*f),i=c,a<0?(m[o+s]=a+f,a=-1):(m[o+s]=a,a=0);for(;0!==a;){for(n-=1,i=0,s=0;s<u;s++)(i+=m[o+s]-f+w[s])<0?(m[o+s]=i+f,i=0):(m[o+s]=i,i=1);a+=i}h[o]=n}return m=A(m,y)[0],[d(h),d(m)]}(l,y):function(e,r){for(var n,o,i,a,s,u=e.length,c=r.length,p=[],l=[],f=t;u;)if(l.unshift(e[--u]),h(l),C(l,r)<0)p.push(0);else{i=l[(o=l.length)-1]*f+l[o-2],a=r[c-1]*f+r[c-2],o>c&&(i=(i+1)*f),n=Math.ceil(i/a);do{if(C(s=E(r,n),l)<=0)break;n--}while(n);p.push(n),l=_(l,s)}return p.reverse(),[d(p),d(l)]}(l,y),i=n[0];var x=e.sign!==o.sign,S=n[1],O=e.sign;return"number"==typeof i?(x&&(i=-i),i=new c(i)):i=new u(i,x),"number"==typeof S?(O&&(S=-S),S=new c(S)):S=new u(S,O),[i,S]}function C(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function N(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function k(e,t){for(var r,n,i,a=e.prev(),s=a,u=0;s.isEven();)s=s.divide(2),u++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(i=o(t[n]).modPow(s,e)).isUnit()&&!i.equals(a)){for(r=u-1;0!=r;r--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(a))continue e}return!1}return!0}u.prototype=Object.create(s.prototype),c.prototype=Object.create(s.prototype),p.prototype=Object.create(s.prototype),u.prototype.add=function(e){var t=X(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new u(w(r,Math.abs(n)),this.sign):new u(m(r,n),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){var t=X(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(l(r+n))return new c(r+n);n=f(Math.abs(n))}return new u(w(n,Math.abs(r)),r<0)},c.prototype.plus=c.prototype.add,p.prototype.add=function(e){return new p(this.value+X(e).value)},p.prototype.plus=p.prototype.add,u.prototype.subtract=function(e){var t=X(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?b(r,Math.abs(n),this.sign):function(e,t,r){var n;return C(e,t)>=0?n=_(e,t):(n=_(t,e),r=!r),"number"==typeof(n=d(n))?(r&&(n=-n),new c(n)):new u(n,r)}(r,n,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){var t=X(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new c(r-n):b(n,Math.abs(r),r>=0)},c.prototype.minus=c.prototype.subtract,p.prototype.subtract=function(e){return new p(this.value-X(e).value)},p.prototype.minus=p.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var e=this.sign,t=new c(-this.value);return t.sign=!e,t},p.prototype.negate=function(){return new p(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},p.prototype.abs=function(){return new p(this.value>=0?this.value:-this.value)},u.prototype.multiply=function(e){var r,n,o,i=X(e),a=this.value,c=i.value,p=this.sign!==i.sign;if(i.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((r=Math.abs(c))<t)return new u(E(a,r),p);c=f(r)}return n=a.length,o=c.length,new u(-.012*n-.012*o+15e-6*n*o>0?O(a,c):x(a,c),p)},u.prototype.times=u.prototype.multiply,c.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new c(e.value*this.value):R(Math.abs(e.value),f(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?s[0]:1===e.value?this:-1===e.value?this.negate():R(Math.abs(e.value),this.value,this.sign!==e.sign)},c.prototype.multiply=function(e){return X(e)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,p.prototype.multiply=function(e){return new p(this.value*X(e).value)},p.prototype.times=p.prototype.multiply,u.prototype.square=function(){return new u(T(this.value),!1)},c.prototype.square=function(){var e=this.value*this.value;return l(e)?new c(e):new u(T(f(Math.abs(this.value))),!1)},p.prototype.square=function(e){return new p(this.value*this.value)},u.prototype.divmod=function(e){var t=I(this,e);return{quotient:t[0],remainder:t[1]}},p.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(e){return I(this,e)[0]},p.prototype.over=p.prototype.divide=function(e){return new p(this.value/X(e).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(e){return I(this,e)[1]},p.prototype.mod=p.prototype.remainder=function(e){return new p(this.value%X(e).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(e){var t,r,n,o=X(e),i=this.value,a=o.value;if(0===a)return s[1];if(0===i)return s[0];if(1===i)return s[1];if(-1===i)return o.isEven()?s[1]:s[-1];if(o.sign)return s[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(i,a)))return new c(v(t));for(r=this,n=s[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},c.prototype.pow=u.prototype.pow,p.prototype.pow=function(e){var t=X(e),r=this.value,n=t.value,o=BigInt(0),i=BigInt(1),a=BigInt(2);if(n===o)return s[1];if(r===o)return s[0];if(r===i)return s[1];if(r===BigInt(-1))return t.isEven()?s[1]:s[-1];if(t.isNegative())return new p(o);for(var u=this,c=s[1];(n&i)===i&&(c=c.times(u),--n),n!==o;)n/=a,u=u.square();return c},u.prototype.modPow=function(e,t){if(e=X(e),(t=X(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=s[1],n=this.mod(t);for(e.isNegative()&&(e=e.multiply(s[-1]),n=n.modInv(t));e.isPositive();){if(n.isZero())return s[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},p.prototype.modPow=c.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(e){var t=X(e),r=this.value,n=t.value;return t.isSmall?1:C(r,n)},c.prototype.compareAbs=function(e){var t=X(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},p.prototype.compareAbs=function(e){var t=this.value,r=X(e).value;return(t=t>=0?t:-t)===(r=r>=0?r:-r)?0:t>r?1:-1},u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:C(r,n)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},c.prototype.compareTo=c.prototype.compare,p.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,r=X(e).value;return t===r?0:t>r?1:-1},p.prototype.compareTo=p.prototype.compare,u.prototype.equals=function(e){return 0===this.compare(e)},p.prototype.eq=p.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(e){return 0!==this.compare(e)},p.prototype.neq=p.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(e){return this.compare(e)>0},p.prototype.gt=p.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(e){return this.compare(e)<0},p.prototype.lt=p.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},p.prototype.geq=p.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},p.prototype.leq=p.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},c.prototype.isEven=function(){return 0==(1&this.value)},p.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},c.prototype.isOdd=function(){return 1==(1&this.value)},p.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},p.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},p.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},p.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},p.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(e){var t=X(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},p.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(t){var r=N(this);if(r!==e)return r;var n=this.abs(),i=n.bitLength();if(i<=64)return k(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var a=Math.log(2)*i.toJSNumber(),s=Math.ceil(!0===t?2*Math.pow(a,2):a),u=[],c=0;c<s;c++)u.push(o(c+2));return k(n,u)},p.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(t,r){var n=N(this);if(n!==e)return n;for(var i=this.abs(),a=t===e?5:t,s=[],u=0;u<a;u++)s.push(o.randBetween(2,i.minus(2),r));return k(i,s)},p.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(e){for(var t,r,n,i=o.zero,a=o.one,s=X(e),u=this.abs();!u.isZero();)t=s.divide(u),r=i,n=s,i=a,s=u,a=r.subtract(t.multiply(a)),u=n.subtract(t.multiply(u));if(!s.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},p.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var e=this.value;return this.sign?b(e,1,this.sign):new u(w(e,1),this.sign)},c.prototype.next=function(){var e=this.value;return e+1<r?new c(e+1):new u(n,!1)},p.prototype.next=function(){return new p(this.value+BigInt(1))},u.prototype.prev=function(){var e=this.value;return this.sign?new u(w(e,1),!0):b(e,1,this.sign)},c.prototype.prev=function(){var e=this.value;return e-1>-r?new c(e-1):new u(n,!0)},p.prototype.prev=function(){return new p(this.value-BigInt(1))};for(var q=[1];2*q[q.length-1]<=t;)q.push(2*q[q.length-1]);var L=q.length,j=q[L-1];function P(e){return Math.abs(e)<=t}function D(e,t,r){t=X(t);for(var n=e.isNegative(),i=t.isNegative(),a=n?e.not():e,s=i?t.not():t,u=0,c=0,p=null,l=null,f=[];!a.isZero()||!s.isZero();)u=(p=I(a,j))[1].toJSNumber(),n&&(u=j-1-u),c=(l=I(s,j))[1].toJSNumber(),i&&(c=j-1-c),a=p[0],s=l[0],f.push(r(u,c));for(var d=0!==r(n?1:0,i?1:0)?o(-1):o(0),h=f.length-1;h>=0;h-=1)d=d.multiply(j).add(o(f[h]));return d}u.prototype.shiftLeft=function(e){var t=X(e).toJSNumber();if(!P(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;t>=L;)r=r.multiply(j),t-=L-1;return r.multiply(q[t])},p.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(e){var t,r=X(e).toJSNumber();if(!P(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=L;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=I(n,j))[1].isNegative()?t[0].prev():t[0],r-=L-1}return(t=I(n,q[r]))[1].isNegative()?t[0].prev():t[0]},p.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},p.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(e){return D(this,e,(function(e,t){return e&t}))},p.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(e){return D(this,e,(function(e,t){return e|t}))},p.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(e){return D(this,e,(function(e,t){return e^t}))},p.prototype.xor=c.prototype.xor=u.prototype.xor;var M=1<<30;function J(e){var r=e.value,n="number"==typeof r?r|M:"bigint"==typeof r?r|BigInt(M):r[0]+r[1]*t|1073758208;return n&-n}function B(e,t){if(t.compareTo(e)<=0){var r=B(e,t.square(t)),n=r.p,i=r.e,a=n.multiply(t);return a.compareTo(e)<=0?{p:a,e:2*i+1}:{p:n,e:2*i}}return{p:o(1),e:0}}function U(e,t){return e=X(e),t=X(t),e.greater(t)?e:t}function K(e,t){return e=X(e),t=X(t),e.lesser(t)?e:t}function F(e,t){if(e=X(e).abs(),t=X(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,o=s[1];e.isEven()&&t.isEven();)r=K(J(e),J(t)),e=e.divide(r),t=t.divide(r),o=o.multiply(r);for(;e.isEven();)e=e.divide(J(e));do{for(;t.isEven();)t=t.divide(J(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return o.isUnit()?e:e.multiply(o)}u.prototype.bitLength=function(){var e=this;return e.compareTo(o(0))<0&&(e=e.negate().subtract(o(1))),0===e.compareTo(o(0))?o(0):o(B(e,o(2)).e).add(o(1))},p.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength;var H=function(e,t,r,n){r=r||i,e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());var o,a=e.length,s=Math.abs(t),u={};for(o=0;o<r.length;o++)u[r[o]]=o;for(o=0;o<a;o++){if("-"!==(l=e[o])&&(l in u&&u[l]>=s)){if("1"===l&&1===s)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=X(t);var c=[],p="-"===e[0];for(o=p?1:0;o<e.length;o++){var l;if((l=e[o])in u)c.push(X(u[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var f=o;do{o++}while(">"!==e[o]&&o<e.length);c.push(X(e.slice(f+1,o)))}}return W(c,t,p)};function W(e,t,r){var n,o=s[0],i=s[1];for(n=e.length-1;n>=0;n--)o=o.add(e[n].times(i)),i=i.times(t);return r?o.negate():o}function V(e,t){if((t=o(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var i,a=[],s=e;s.isNegative()||s.compareAbs(t)>=0;){i=s.divmod(t),s=i.quotient;var u=i.remainder;u.isNegative()&&(u=t.minus(u).abs(),s=s.next()),a.push(u.toJSNumber())}return a.push(s.toJSNumber()),{value:a.reverse(),isNegative:n}}function G(e,t,r){var n=V(e,t);return(n.isNegative?"-":"")+n.value.map((function(e){return function(e,t){return e<(t=t||i).length?t[e]:"<"+e+">"}(e,r)})).join("")}function z(e){if(l(+e)){var t=+e;if(t===v(t))return a?new p(BigInt(t)):new c(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var o=n[1];if("+"===o[0]&&(o=o.slice(1)),(o=+o)!==v(o)||!l(o))throw new Error("Invalid integer: "+o+" is not a valid exponent.");var i=n[0],s=i.indexOf(".");if(s>=0&&(o-=i.length-s-1,i=i.slice(0,s)+i.slice(s+1)),o<0)throw new Error("Cannot include negative exponent part for integers");e=i+=new Array(o+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(a)return new p(BigInt(r?"-"+e:e));for(var f=[],d=e.length,g=d-7;d>0;)f.push(+e.slice(g,d)),(g-=7)<0&&(g=0),d-=7;return h(f),new u(f,r)}function X(e){return"number"==typeof e?function(e){if(a)return new p(BigInt(e));if(l(e)){if(e!==v(e))throw new Error(e+" is not an integer.");return new c(e)}return z(e.toString())}(e):"string"==typeof e?z(e):"bigint"==typeof e?new p(e):e}u.prototype.toArray=function(e){return V(this,e)},c.prototype.toArray=function(e){return V(this,e)},p.prototype.toArray=function(e){return V(this,e)},u.prototype.toString=function(t,r){if(t===e&&(t=10),10!==t)return G(this,t,r);for(var n,o=this.value,i=o.length,a=String(o[--i]);--i>=0;)n=String(o[i]),a+="0000000".slice(n.length)+n;return(this.sign?"-":"")+a},c.prototype.toString=function(t,r){return t===e&&(t=10),10!=t?G(this,t,r):String(this.value)},p.prototype.toString=c.prototype.toString,p.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,p.prototype.valueOf=p.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var $=0;$<1e3;$++)s[$]=X($),$>0&&(s[-$]=X(-$));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=U,s.min=K,s.gcd=F,s.lcm=function(e,t){return e=X(e).abs(),t=X(t).abs(),e.divide(F(e,t)).multiply(t)},s.isInstance=function(e){return e instanceof u||e instanceof c||e instanceof p},s.randBetween=function(e,r,n){e=X(e),r=X(r);var o=n||Math.random,i=K(e,r),a=U(e,r).subtract(i).add(1);if(a.isSmall)return i.add(Math.floor(o()*a));for(var u=V(a,t).value,c=[],p=!0,l=0;l<u.length;l++){var f=p?u[l]+(l+1<u.length?u[l+1]/t:0):t,d=v(o()*f);c.push(d),d<u[l]&&(p=!1)}return i.add(s.fromArray(c,t,!1))},s.fromArray=function(e,t,r){return W(e.map(X),X(t||10),r)},s}();e.hasOwnProperty("exports")&&(e.exports=o),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}).call(this,r(12)(e))},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){var n,o,i,a,s;n=r(10),o=r(2).utf8,i=r(11),a=r(2).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,p=-271733879,l=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var h=s._ff,g=s._gg,v=s._hh,y=s._ii;for(d=0;d<r.length;d+=16){var m=c,w=p,_=l,b=f;c=h(c,p,l,f,r[d+0],7,-680876936),f=h(f,c,p,l,r[d+1],12,-389564586),l=h(l,f,c,p,r[d+2],17,606105819),p=h(p,l,f,c,r[d+3],22,-1044525330),c=h(c,p,l,f,r[d+4],7,-176418897),f=h(f,c,p,l,r[d+5],12,1200080426),l=h(l,f,c,p,r[d+6],17,-1473231341),p=h(p,l,f,c,r[d+7],22,-45705983),c=h(c,p,l,f,r[d+8],7,1770035416),f=h(f,c,p,l,r[d+9],12,-1958414417),l=h(l,f,c,p,r[d+10],17,-42063),p=h(p,l,f,c,r[d+11],22,-1990404162),c=h(c,p,l,f,r[d+12],7,1804603682),f=h(f,c,p,l,r[d+13],12,-40341101),l=h(l,f,c,p,r[d+14],17,-1502002290),c=g(c,p=h(p,l,f,c,r[d+15],22,1236535329),l,f,r[d+1],5,-165796510),f=g(f,c,p,l,r[d+6],9,-1069501632),l=g(l,f,c,p,r[d+11],14,643717713),p=g(p,l,f,c,r[d+0],20,-373897302),c=g(c,p,l,f,r[d+5],5,-701558691),f=g(f,c,p,l,r[d+10],9,38016083),l=g(l,f,c,p,r[d+15],14,-660478335),p=g(p,l,f,c,r[d+4],20,-405537848),c=g(c,p,l,f,r[d+9],5,568446438),f=g(f,c,p,l,r[d+14],9,-1019803690),l=g(l,f,c,p,r[d+3],14,-187363961),p=g(p,l,f,c,r[d+8],20,1163531501),c=g(c,p,l,f,r[d+13],5,-1444681467),f=g(f,c,p,l,r[d+2],9,-51403784),l=g(l,f,c,p,r[d+7],14,1735328473),c=v(c,p=g(p,l,f,c,r[d+12],20,-1926607734),l,f,r[d+5],4,-378558),f=v(f,c,p,l,r[d+8],11,-2022574463),l=v(l,f,c,p,r[d+11],16,1839030562),p=v(p,l,f,c,r[d+14],23,-35309556),c=v(c,p,l,f,r[d+1],4,-1530992060),f=v(f,c,p,l,r[d+4],11,1272893353),l=v(l,f,c,p,r[d+7],16,-155497632),p=v(p,l,f,c,r[d+10],23,-1094730640),c=v(c,p,l,f,r[d+13],4,681279174),f=v(f,c,p,l,r[d+0],11,-358537222),l=v(l,f,c,p,r[d+3],16,-722521979),p=v(p,l,f,c,r[d+6],23,76029189),c=v(c,p,l,f,r[d+9],4,-640364487),f=v(f,c,p,l,r[d+12],11,-421815835),l=v(l,f,c,p,r[d+15],16,530742520),c=y(c,p=v(p,l,f,c,r[d+2],23,-995338651),l,f,r[d+0],6,-198630844),f=y(f,c,p,l,r[d+7],10,1126891415),l=y(l,f,c,p,r[d+14],15,-1416354905),p=y(p,l,f,c,r[d+5],21,-57434055),c=y(c,p,l,f,r[d+12],6,1700485571),f=y(f,c,p,l,r[d+3],10,-1894986606),l=y(l,f,c,p,r[d+10],15,-1051523),p=y(p,l,f,c,r[d+1],21,-2054922799),c=y(c,p,l,f,r[d+8],6,1873313359),f=y(f,c,p,l,r[d+15],10,-30611744),l=y(l,f,c,p,r[d+6],15,-1560198380),p=y(p,l,f,c,r[d+13],21,1309151649),c=y(c,p,l,f,r[d+4],6,-145523070),f=y(f,c,p,l,r[d+11],10,-1120210379),l=y(l,f,c,p,r[d+2],15,718787259),p=y(p,l,f,c,r[d+9],21,-343485551),c=c+m>>>0,p=p+w>>>0,l=l+_>>>0,f=f+b>>>0}return n.endian([c,p,l,f])})._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):n.bytesToHex(r)}},function(e,t,r){var n=r(13),o=r(14);e.exports=n,e.exports.murmur3=n,e.exports.murmur2=o},function(e,t,r){r(15),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},o=e.split(";"),i=(t||{}).decode||n,s=0;s<o.length;s++){var u=o[s],c=u.indexOf("=");if(!(c<0)){var p=u.substring(0,c).trim();if(null==r[p]){var l=u.substring(c+1,u.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),r[p]=a(l,i)}}}return r},t.serialize=function(e,t,r){var n=r||{},a=n.encode||o;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!i.test(s))throw new TypeError("argument val is invalid");var u=e+"="+s;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(u+="; HttpOnly");n.secure&&(u+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u};var n=decodeURIComponent,o=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},function(e,t){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),function(e,t){function r(){var e={},t=new f((function(t,r){e.resolve=t,e.reject=r}));return e.promise=t,e}function n(e,t){for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}function o(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}function i(){if(window.etSign)window.__etReady=!0;else{window.etReady=function(){window.__etReady=!0};var e=document.createElement("script");e.id="aplus-sufei",e.src="//g.alicdn.com/secdev/entry/index.js",o(e)}}function a(e){var t=[];for(var r in e)e[r]&&t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}function s(e){return"[object Object]"=={}.toString.call(e)}function u(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function c(e,t,r){var n=new Date;n.setTime(n.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+n.toGMTString(),document.cookie=e+"=;path=/;domain=."+r+"."+t+";expires="+n.toGMTString()}function p(e,t){for(var r=e.split("."),n=t.split("."),o=0;3>o;o++){var i=Number(r[o]),a=Number(n[o]);if(i>a)return 1;if(a>i)return-1;if(!isNaN(i)&&isNaN(a))return 1;if(isNaN(i)&&!isNaN(a))return-1}return 0}function l(e){this.id=""+(new Date).getTime()+ ++w,this.params=n(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=g.slice(0)}var f=e.Promise,d=(f||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var h={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},g=[],v={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var t=e.location.hostname;if(!t){var r=e.parent.location.hostname;r&&~r.indexOf("zebra.alibaba-inc.com")&&(t=r)}var n=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),o=t.match(n)||[],i=o[2]||"taobao.com",a=o[1]||"m";"taobao.net"!==i||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===i&&"demo"===a?a="demo":"alibaba-inc.com"===i&&"zebra"===a?a="zebra":"waptest"!==a&&"wapa"!==a&&"m"!==a&&(a="m"):a="waptest";var s="h5api";"taobao.net"===i&&"waptest"===a&&(s="acs"),h.mainDomain=i,h.subDomain=a,h.prefix=s})(),function(){var t=e.navigator.userAgent,r=t.match(/WindVane[\/\s]([\d\.\_]+)/);r&&(h.WindVaneVersion=r[1]);var n=t.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);n&&(h.AliAppName=n[1],h.AliAppVersion=n[2]);var o=t.match(/AMapClient\/([\d\.\_]+)/i);o&&(h.AliAppName="AMAP",h.AliAppVersion=o[1])}();var y=/[Android|Adr]/.test(e.navigator.userAgent),m="AP"===h.AliAppName&&p(h.AliAppVersion,"10.1.2")>=0||"KB"===h.AliAppName&&p(h.AliAppVersion,"7.1.62")>=0||y&&"AMAP"===h.AliAppName&&p(h.AliAppVersion,"1.0.1")>=0,w=0;l.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},l.prototype.__processRequestMethod=function(e){var t=this.params,r=this.options;"get"===t.type&&"jsonp"===t.dataType?r.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?r.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?r.getJSON=!0:"post"===t.type&&(r.postJSON=!0),e()},l.prototype.__processRequestType=function(r){var n=this,o=this.params,i=this.options;if(!0===h.H5Request&&(i.H5Request=!0),!0===h.WindVaneRequest&&(i.WindVaneRequest=!0),!1===i.H5Request&&!0===i.WindVaneRequest){if(!m&&(!t.windvane||parseFloat(i.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::\u7f3a\u5c11WindVane\u73af\u5883");if(m&&!e.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::\u652f\u4ed8\u5b9d\u901a\u9053\u672a\u51c6\u5907\u597d\uff0c\u652f\u4ed8\u5b9d\u8bf7\u89c1 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===i.H5Request)i.WindVaneRequest=!1;else if(void 0===i.WindVaneRequest&&void 0===i.H5Request){if(t.windvane&&parseFloat(i.WindVaneVersion)>=5.4?i.WindVaneRequest=!0:i.H5Request=!0,m){if(i.WindVaneRequest=i.H5Request=void 0,e.AlipayJSBridge)if(s(o.data))i.WindVaneRequest=!0;else try{s(JSON.parse(o.data))?i.WindVaneRequest=!0:i.H5Request=!0}catch(e){i.H5Request=!0}else i.H5Request=!0;"AMAP"!==h.AliAppName||o.useNebulaJSbridgeWithAMAP||(i.WindVaneRequest=i.H5Request=void 0,i.H5Request=!0)}window.self!==window.top&&(i.H5Request=!0)}var a=e.navigator.userAgent.toLowerCase();return a.indexOf("youku")>-1&&i.mainDomain.indexOf("youku.com")<0&&(i.WindVaneRequest=!1,i.H5Request=!0),i.mainDomain.indexOf("youku.com")>-1&&a.indexOf("youku")<0&&(i.WindVaneRequest=!1,i.H5Request=!0),r?r().then((function(){var e=i.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===i.WindVaneRequest&&m&&i.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!m||!isNaN(i.retJson.error)||-1!==i.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return m&&s(o.data)&&(o.data=JSON.stringify(o.data)),h.H5Request=!0,n.__sequence([n.__processRequestType,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest]);void 0===i.retJson.api&&void 0===i.retJson.v&&(i.retJson.api=o.api,i.retJson.v=o.v,i.retJson.ret=[i.retJson.error+"::"+i.retJson.errorMessage],i.retJson.data={})}})):void 0};var _="_m_h5_c",b="_m_h5_tk";l.prototype.__getTokenFromAlipay=function(){var t=r(),n=this.options,o=(e.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===n.useAlipayJSBridge&&!o&&m&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",(function(e){e&&e.token&&(n.token=e.token),t.resolve()}),(function(){t.resolve()})):t.resolve(),t.promise},l.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&u(_)?e.token=u(_).split(";")[0]:e.token=e.token||u(b),e.token&&(e.token=e.token.split("_")[0]),f.resolve()},l.prototype.__waitWKWebViewCookie=function(t){var r=this.options;r.waitWKWebViewCookieFn&&r.H5Request&&e.webkit&&e.webkit.messageHandlers?r.waitWKWebViewCookieFn(t):t()},l.prototype.__processToken=function(e){var t=this,r=this.options;return this.params,r.token&&delete r.token,!0!==r.WindVaneRequest?d.then((function(){return t.__getTokenFromAlipay()})).then((function(){return t.__getTokenFromCookie()})).then(e).then((function(){var e=r.retJson,n=e.ret;if(n instanceof Array&&(n=n.join(",")),n.indexOf("TOKEN_EMPTY")>-1||(!0===r.CDR||!0===r.syncCookieMode)&&n.indexOf("ILLEGAL_ACCESS")>-1||n.indexOf("TOKEN_EXOIRED")>-1){if(r.maxRetryTimes=r.maxRetryTimes||5,r.failTimes=r.failTimes||0,r.H5Request&&++r.failTimes<r.maxRetryTimes){var o=[t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest];if(!0===r.syncCookieMode&&t.constructor.__cookieProcessorId!==t.id)if(t.constructor.__cookieProcessor){o=[function(e){var r=function(){t.constructor.__cookieProcessor=null,t.constructor.__cookieProcessorId=null,e()};t.constructor.__cookieProcessor?t.constructor.__cookieProcessor.then(r).catch(r):e()},t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]}else t.constructor.__cookieProcessor=t.__requestProcessor,t.constructor.__cookieProcessorId=t.id;return t.__sequence(o)}r.maxRetryTimes>0&&(c(_,r.pageDomain,"*"),c(b,r.mainDomain,r.subDomain),c("_m_h5_tk_enc",r.mainDomain,r.subDomain)),e.retType=v.TOKEN_EXPIRED}})):void e()},l.prototype.__processRequestUrl=function(t){var r=this.params,n=this.options;if(n.hostSetting&&n.hostSetting[e.location.hostname]){var o=n.hostSetting[e.location.hostname];o.prefix&&(n.prefix=o.prefix),o.subDomain&&(n.subDomain=o.subDomain),o.mainDomain&&(n.mainDomain=o.mainDomain)}if(!0===n.H5Request){var a="//"+(n.prefix?n.prefix+".":"")+(n.subDomain?n.subDomain+".":"")+n.mainDomain+"/h5/"+r.api.toLowerCase()+"/"+r.v.toLowerCase()+"/",s=r.appKey||("waptest"===n.subDomain?"4272":"12574478"),u=(new Date).getTime(),c=function(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r,n,o,i,a;return o=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^a^o^i:r|n?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function n(e,n,o,i,a,s,u){return e=r(e,r(r(function(e,t,r){return e&t|~e&r}(n,o,i),a),u)),r(t(e,s),n)}function o(e,n,o,i,a,s,u){return e=r(e,r(r(function(e,t,r){return e&r|t&~r}(n,o,i),a),u)),r(t(e,s),n)}function i(e,n,o,i,a,s,u){return e=r(e,r(r(function(e,t,r){return e^t^r}(n,o,i),a),u)),r(t(e,s),n)}function a(e,n,o,i,a,s,u){return e=r(e,r(r(function(e,t,r){return t^(e|~r)}(n,o,i),a),u)),r(t(e,s),n)}function s(e){var t,r="",n="";for(t=0;3>=t;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var u,c,p,l,f,d,h,g,v,y;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e),y=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),i=new Array(o-1),a=0,s=0;r>s;)a=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<a,i[o-2]=r<<3,i[o-1]=r>>>29,i}(e),d=1732584193,h=4023233417,g=2562383102,v=271733878,u=0;u<y.length;u+=16)c=d,p=h,l=g,f=v,d=n(d,h,g,v,y[u+0],7,3614090360),v=n(v,d,h,g,y[u+1],12,3905402710),g=n(g,v,d,h,y[u+2],17,606105819),h=n(h,g,v,d,y[u+3],22,3250441966),d=n(d,h,g,v,y[u+4],7,4118548399),v=n(v,d,h,g,y[u+5],12,1200080426),g=n(g,v,d,h,y[u+6],17,2821735955),h=n(h,g,v,d,y[u+7],22,4249261313),d=n(d,h,g,v,y[u+8],7,1770035416),v=n(v,d,h,g,y[u+9],12,2336552879),g=n(g,v,d,h,y[u+10],17,4294925233),h=n(h,g,v,d,y[u+11],22,2304563134),d=n(d,h,g,v,y[u+12],7,1804603682),v=n(v,d,h,g,y[u+13],12,4254626195),g=n(g,v,d,h,y[u+14],17,2792965006),d=o(d,h=n(h,g,v,d,y[u+15],22,1236535329),g,v,y[u+1],5,4129170786),v=o(v,d,h,g,y[u+6],9,3225465664),g=o(g,v,d,h,y[u+11],14,643717713),h=o(h,g,v,d,y[u+0],20,3921069994),d=o(d,h,g,v,y[u+5],5,3593408605),v=o(v,d,h,g,y[u+10],9,38016083),g=o(g,v,d,h,y[u+15],14,3634488961),h=o(h,g,v,d,y[u+4],20,3889429448),d=o(d,h,g,v,y[u+9],5,568446438),v=o(v,d,h,g,y[u+14],9,3275163606),g=o(g,v,d,h,y[u+3],14,4107603335),h=o(h,g,v,d,y[u+8],20,1163531501),d=o(d,h,g,v,y[u+13],5,2850285829),v=o(v,d,h,g,y[u+2],9,4243563512),g=o(g,v,d,h,y[u+7],14,1735328473),d=i(d,h=o(h,g,v,d,y[u+12],20,2368359562),g,v,y[u+5],4,4294588738),v=i(v,d,h,g,y[u+8],11,2272392833),g=i(g,v,d,h,y[u+11],16,1839030562),h=i(h,g,v,d,y[u+14],23,4259657740),d=i(d,h,g,v,y[u+1],4,2763975236),v=i(v,d,h,g,y[u+4],11,1272893353),g=i(g,v,d,h,y[u+7],16,4139469664),h=i(h,g,v,d,y[u+10],23,3200236656),d=i(d,h,g,v,y[u+13],4,681279174),v=i(v,d,h,g,y[u+0],11,3936430074),g=i(g,v,d,h,y[u+3],16,3572445317),h=i(h,g,v,d,y[u+6],23,76029189),d=i(d,h,g,v,y[u+9],4,3654602809),v=i(v,d,h,g,y[u+12],11,3873151461),g=i(g,v,d,h,y[u+15],16,530742520),d=a(d,h=i(h,g,v,d,y[u+2],23,3299628645),g,v,y[u+0],6,4096336452),v=a(v,d,h,g,y[u+7],10,1126891415),g=a(g,v,d,h,y[u+14],15,2878612391),h=a(h,g,v,d,y[u+5],21,4237533241),d=a(d,h,g,v,y[u+12],6,1700485571),v=a(v,d,h,g,y[u+3],10,2399980690),g=a(g,v,d,h,y[u+10],15,4293915773),h=a(h,g,v,d,y[u+1],21,2240044497),d=a(d,h,g,v,y[u+8],6,1873313359),v=a(v,d,h,g,y[u+15],10,4264355552),g=a(g,v,d,h,y[u+6],15,2734768916),h=a(h,g,v,d,y[u+13],21,1309151649),d=a(d,h,g,v,y[u+4],6,4149444226),v=a(v,d,h,g,y[u+11],10,3174756917),g=a(g,v,d,h,y[u+2],15,718787259),h=a(h,g,v,d,y[u+9],21,3951481745),d=r(d,c),h=r(h,p),g=r(g,l),v=r(v,f);return(s(d)+s(h)+s(g)+s(v)).toLowerCase()}(n.token+"&"+u+"&"+s+"&"+r.data),p={jsv:"2.7.0",appKey:s,t:u,sign:c},l={data:r.data,ua:r.ua};Object.keys(r).forEach((function(e){void 0===p[e]&&void 0===l[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(p[e]=r[e])})),r.ext_querys&&Object.keys(r.ext_querys).forEach((function(e){p[e]=r.ext_querys[e]})),n.getJSONP?p.type="jsonp":n.getOriginalJSONP?p.type="originaljsonp":(n.getJSON||n.postJSON)&&(p.type="originaljson"),void 0!==r.valueType&&("original"===r.valueType?n.getJSONP||n.getOriginalJSONP?p.type="originaljsonp":(n.getJSON||n.postJSON)&&(p.type="originaljson"):"string"===r.valueType&&(n.getJSONP||n.getOriginalJSONP?p.type="jsonp":(n.getJSON||n.postJSON)&&(p.type="json"))),!0===n.useJsonpResultType&&"originaljson"===p.type&&delete p.type,n.dangerouslySetProtocol&&(a=n.dangerouslySetProtocol+":"+a),"5.0"===r.SV&&(a+="5.0/",i()),n.querystring=p,n.postdata=l,n.path=a}t()},l.prototype.__processUnitPrefix=function(e){e()};var x=0;l.prototype.__requestJSONP=function(e){function t(e){if(p&&clearTimeout(p),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===e)window[c]=function(){window[c]=void 0;try{delete window[c]}catch(e){}};else{window[c]=void 0;try{delete window[c]}catch(e){}}}var n=r(),i=this.params,s=this.options,u=i.timeout||2e4,c="mtopjsonp"+(i.jsonpIncPrefix||"")+ ++x,p=setTimeout((function(){e(s.timeoutErrMsg||"TIMEOUT::\u63a5\u53e3\u8d85\u65f6"),t("TIMEOUT")}),u);s.querystring.callback=c;var l=document.createElement("script"),f=s.path+"?"+a(s.querystring)+"&"+a(s.postdata);return"5.0"===i.SV&&window.etSign&&(f+="&bx_et="+window.etSign(f)),l.src=f,l.async=!0,l.onerror=function(){t("ABORT"),e(s.abortErrMsg||"ABORT::\u63a5\u53e3\u5f02\u5e38\u9000\u51fa")},window[c]=function(){s.results=Array.prototype.slice.call(arguments),t(),n.resolve()},o(l),n.promise},l.prototype.__requestJSON=function(t){function n(e){l&&clearTimeout(l),"TIMEOUT"===e&&c.abort()}var o=r(),i=this.params,s=this.options,c=new e.XMLHttpRequest,p=i.timeout||2e4,l=setTimeout((function(){t(s.timeoutErrMsg||"TIMEOUT::\u63a5\u53e3\u8d85\u65f6"),n("TIMEOUT")}),p);s.CDR&&u(_)&&(s.querystring.c=decodeURIComponent(u(_))),c.onreadystatechange=function(){if(4==c.readyState){var e,r,i=c.status;if(i>=200&&300>i||304==i){n(),e=c.responseText,r=c.getAllResponseHeaders()||"";try{(e=/^\s*$/.test(e)?{}:JSON.parse(e)).responseHeaders=r,s.results=[e],o.resolve()}catch(e){t("PARSE_JSON_ERROR::\u89e3\u6790JSON\u5931\u8d25")}}else n("ABORT"),t(s.abortErrMsg||"ABORT::\u63a5\u53e3\u5f02\u5e38\u9000\u51fa")}};var f,d,h=s.path+"?"+a(s.querystring);s.getJSON?(f="GET",h+="&"+a(s.postdata)):s.postJSON&&(f="POST",d=a(s.postdata)),"5.0"===i.SV&&window.etSign&&(h+="&bx_et="+window.etSign(h)),c.open(f,h,!0),c.withCredentials=!0,c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g=i.ext_headers||i.headers;if(g)for(var v in g)c.setRequestHeader(v,g[v]);return c.send(d),o.promise},l.prototype.__requestWindVane=function(e){function n(e){a.results=[e],o.resolve()}var o=r(),i=this.params,a=this.options,s=i.data,u=i.api,c=i.v,p=a.postJSON?1:0,l=a.getJSON||a.postJSON||a.getOriginalJSONP?"originaljson":"";void 0!==i.valueType&&("original"===i.valueType?l="originaljson":"string"===i.valueType&&(l="")),!0===a.useJsonpResultType&&(l="");var f,d,h="https"===location.protocol?1:0,g=i.isSec||0,v=i.sessionOption||"AutoLoginOnly",y=i.ecode||0,m=i.ext_headers||{},w=i.ext_querys||{};f=2*(d=void 0!==i.timer?parseInt(i.timer):void 0!==i.timeout?parseInt(i.timeout):2e4),!0===i.needLogin&&void 0===i.sessionOption&&(v="AutoLoginAndManualLogin"),void 0!==i.secType&&void 0===i.isSec&&(g=i.secType);var _={api:u,v:c,post:String(p),type:l,isHttps:String(h),ecode:String(y),isSec:String(g),param:JSON.parse(s),timer:d,needLogin:!!i.needLogin,sessionOption:v,ext_headers:m,ext_querys:w};i.ttid&&!0===a.dangerouslySetWVTtid&&(_.ttid=i.ttid),Object.assign&&i.dangerouslySetWindvaneParams&&Object.assign(_,i.dangerouslySetWindvaneParams);var b="MtopWVPlugin";return"string"==typeof i.customWindVaneClassName&&(b=i.customWindVaneClassName),t.windvane.call(b,"send",_,n,n,f),o.promise},l.prototype.__requestAlipay=function(t){var n=r(),o=this.params,i=this.options,a={apiName:o.api,apiVersion:o.v,needEcodeSign:"1"===String(o.ecode),headers:o.ext_headers||{},usePost:!!i.postJSON};s(o.data)||(o.data=JSON.parse(o.data)),a.data=o.data,o.ttid&&!0===i.dangerouslySetWVTtid&&(a.ttid=o.ttid),(i.getJSON||i.postJSON||i.getOriginalJSONP)&&(a.type="originaljson"),void 0!==o.valueType&&("original"===o.valueType?a.type="originaljson":"string"===o.valueType&&delete a.type),!0===i.useJsonpResultType&&delete a.type,Object.assign&&o.dangerouslySetAlipayParams&&Object.assign(a,o.dangerouslySetAlipayParams);var u="mtop";return"string"==typeof o.customAlipayJSBridgeApi&&(u=o.customAlipayJSBridgeApi),e.AlipayJSBridge.call(u,a,(function(e){i.results=[e],n.resolve()})),n.promise},l.prototype.__processRequest=function(e,t){var r=this;return d.then((function(){var e=r.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return r.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return r.__requestJSON(t);if(e.WindVaneRequest)return m?r.__requestAlipay(t):r.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::\u9519\u8bef\u7684\u8bf7\u6c42\u7c7b\u578b")})).then(e).then((function(){var e=r.options,t=(r.params,e.results[0]),n=t&&t.ret||[];t.ret=n,n instanceof Array&&(n=n.join(","));var o=t.c;e.CDR&&o&&function(e,t,r){var n=r||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(n.domain?";domain="+n.domain:"")+(n.path?";path="+n.path:"")+(n.secure?";secure":"")+(n.httponly?";HttpOnly":"")+(n.sameSite?";Samesite="+n.sameSite:"")}(_,o,{domain:e.pageDomain,path:"/",secure:e.secure,sameSite:e.sameSite}),n.indexOf("SUCCESS")>-1?t.retType=v.SUCCESS:t.retType=v.ERROR,e.retJson=t}))},l.prototype.__sequence=function(e){var t=this,n=[],o=[];e.forEach((function e(i){if(i instanceof Array)i.forEach(e);else{var a,s=r(),u=r();n.push((function(){return s=r(),(a=i.call(t,(function(e){return s.resolve(e),u.promise}),(function(e){return s.reject(e),u.promise})))&&(a=a.catch((function(e){s.reject(e)}))),s.promise})),o.push((function(e){return u.resolve(e),a}))}}));for(var i,a=d;i=n.shift();)a=a.then(i);for(;i=o.pop();)a=a.then(i);return a};var E=function(e){if(!h.EtRequest||window.__etReady||h.AliAppName)e();else{i();var t,r,n=!1;window.etReady=function(){window.__etReady=!0,n||(n=!0,e())};var o=function(){t&&clearInterval(t),r&&clearTimeout(r),n||(n=!0,e())};t=setInterval((function(){try{window.etSign&&(window.__etReady=!0,o()),window.etReady&&!window.__etReady&&(window.etReady=function(){window.__etReady=!0,o()})}catch(e){o()}}),100),r=setTimeout((function(){o()}),2e4)}},S=function(e){e()};l.prototype.request=function(r){var o=this;if(this.options=n(r||{},h),!f){var i="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Promise\uff0c\u8bf7\u5728windows\u5bf9\u8c61\u4e0a\u6302\u8f7dPromise\u5bf9\u8c61";throw t.mtop={ERROR:i},new Error(i)}var a=f.resolve([E,S]).then((function(e){var t=e[0],r=e[1];return o.__sequence([t,o.__processRequestMethod,o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest,r])})).then((function(){var e=o.options.retJson;return e.retType!==v.SUCCESS?f.reject(e):o.options.successCallback?void o.options.successCallback(e):f.resolve(e)})).catch((function(e){var r;return e instanceof Error?(console.error(e.stack),r={ret:[e.message],stack:[e.stack],retJson:v.ERROR}):r="string"==typeof e?{ret:[e],retJson:v.ERROR}:void 0!==e?e:o.options.retJson,t.mtop.errorListener&&t.mtop.errorListener({api:o.params.api,data:o.params.data,v:o.params.v,retJson:r}),o.options.failureCallback?void o.options.failureCallback(r):f.reject(r)}));return this.__processRequestType(),o.options.H5Request&&(o.constructor.__firstProcessor||(o.constructor.__firstProcessor=a),E=function(e){o.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(r.pageDomain=r.pageDomain||function(e){try{return".com"!==e.substring(e.lastIndexOf("."))?(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join("."):e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}(e.location.hostname),r.mainDomain!==r.pageDomain&&(r.maxRetryTimes=4,r.CDR=!0)),this.__requestProcessor=a,a},t.mtop=function(e){return new l(e)},t.mtop.request=function(e,t,r){var n={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:r||t};return new l(e).request(n)},t.mtop.H5Request=function(e,t,r){var n={H5Request:!0,successCallback:t,failureCallback:r||t};return new l(e).request(n)},t.mtop.middlewares=g,t.mtop.config=h,t.mtop.RESPONSE_TYPE=v,t.mtop.CLASS=l}(window,window.lib||(window.lib={})),function(e,t){function r(e){return e.preventDefault(),!1}function n(t,n){var o=navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i),i=o&&n.h5url?n.h5url:n.url,a=n.dialogSize,s=this,u=e.dpr||1,c=document.createElement("div"),p=document.documentElement.getBoundingClientRect(),l=Math.max(p.width,window.innerWidth)/u,f=window.innerHeight/u;c.style.cssText=["-webkit-transform:scale("+u+") translateZ(0)","-ms-transform:scale("+u+") translateZ(0)","transform:scale("+u+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+l+"px","height:"+f+"px","z-index:2147483647","position: fixed","left:0","top:0px","background:"+(l>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var d=document.createElement("div");d.style.cssText=["width:100%","height:52px","background:transparent","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),d.innerText=t;var h=document.createElement("img");h.style.cssText=["display:block","position:absolute","margin-top:15px","right:0","top:0","height:15px","line-height:52px","padding:0 20px","color:#999"].join(";"),h.src="https://gw.alicdn.com/tfs/TB1QZN.CYj1gK0jSZFuXXcrHpXa-200-200.png";var g=document.createElement("iframe");if(g.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),o)d.appendChild(h),c.appendChild(d);else{var v=a&&a.width||"420px",y=a&&a.height||"320px",m=50,w=50,_=24,b=-39;y.indexOf("px")>-1?_-=Number(y.replace("px",""))/2:y.indexOf("%")>-1&&(m-=Number(y.replace("%",""))/2),v.indexOf("px")>-1?b+=Number(v.replace("px",""))/2:v.indexOf("%")>-1&&(w+=Number(v.replace("%",""))/2),h.style.cssText=["position:absolute","width:15px","height:15px","top:"+m+"%","left:"+w+"%","cursor: pointer","border:0","z-index:1","overflow:hidden","margin-top:"+_+"px","margin-left:"+b+"px"].join(";"),c.appendChild(h),g.style.cssText=["position:absolute","top:0px","left:0px","bottom:0px","right:0px","margin:auto","width:"+v,"height:"+y,"border:0","background:#FFF","overflow:hidden","border-radius:18px"].join(";")}c.appendChild(g),c.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(c),g.src=i,h.addEventListener("click",(function(){s.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),c.dispatchEvent(e)}),!1),this.addEventListener=function(){c.addEventListener.apply(c,arguments)},this.removeEventListener=function(){c.removeEventListener.apply(c,arguments)},this.show=function(){document.addEventListener("touchmove",r,!1),c.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",r),window.scrollTo(0,-p.top),c.parentNode&&c.parentNode.removeChild(c)}}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop \u521d\u59cb\u5316\u5931\u8d25\uff01");var o=e.Promise,i=t.mtop.CLASS,a=t.mtop.config,s=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push((function(e){var r=this,n=this.options,o=this.params;return e().then((function(){var e=n.retJson,i=e.ret,u=navigator.userAgent.toLowerCase(),c=u.indexOf("safari")>-1&&u.indexOf("chrome")<0&&u.indexOf("qqbrowser")<0;if(i instanceof Array&&(i=i.join(",")),(i.indexOf("SESSION_EXPIRED")>-1||i.indexOf("SID_INVALID")>-1||i.indexOf("AUTH_REJECT")>-1||i.indexOf("NEED_LOGIN")>-1)&&(e.retType=s.SESSION_EXPIRED,!n.WindVaneRequest&&(!0===a.LoginRequest||!0===n.LoginRequest||!0===o.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::\u7f3a\u5c11lib.login");if(!0!==n.safariGoLogin||!c||"taobao.com"===n.pageDomain)return t.login.goLoginAsync().then((function(e){return r.__sequence([r.__processToken,r.__processRequestUrl,r.__processUnitPrefix,r.middlewares,r.__processRequest])})).catch((function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::\u7528\u6237\u53d6\u6d88\u767b\u5f55"):new Error("LOGIN_FAILURE::\u7528\u6237\u767b\u5f55\u5931\u8d25")}));t.login.goLogin()}}))})),t.mtop.loginRequest=function(e,t,r){var n={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:r||t};return new i(e).request(n)},t.mtop.antiFloodRequest=function(e,t,r){var n={AntiFlood:!0,successCallback:t,failureCallback:r||t};return new i(e).request(n)},t.mtop.middlewares.push((function(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==a.AntiFlood&&!0!==t.AntiFlood?void e():e().then((function(){var e=t.retJson,r=e.ret;r instanceof Array&&(r=r.join(",")),r.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)}))})),t.mtop.antiCreepRequest=function(e,t,r){var n={AntiCreep:!0,successCallback:t,failureCallback:r||t};return new i(e).request(n)},t.mtop.middlewares.push((function(t){var r=this,i=this.options,s=this.params;return!1!==i.AntiCreep&&(i.AntiCreep=!0),!0!==s.forceAntiCreep&&!0!==i.H5Request||!0!==a.AntiCreep&&!0!==i.AntiCreep?void t():t().then((function(){var t=i.retJson,a=t.ret;if(a instanceof Array&&(a=a.join(",")),a.indexOf("CHECKJS_FLAG")>-1&&t.uuid&&t.serid){try{var u=!!window.document._sufei_data2,c=new Image,p="https://fourier.taobao.com/ts?ext=200&uuid="+t.uuid+"&serid="+t.serid+"&sufei="+u;window.location&&location.href&&(p+="&href=="+location.href.substr(0,128)),window.__fyModule&&(p+="&fyModuleLoad="+window.__fyModule.load+"&fyModuleInit="+window.__fyModule.init),window.__umModule&&(p+="&umModuleLoad="+window.__umModule.load+"&umModuleInit="+window.__umModule.init),window.__uabModule&&(p+="&uabModuleLoad="+window.__uabModule.load+"&uabModuleInit="+window.__uabModule.init),window.__ncModule&&(p+="&ncModuleLoad="+window.__ncModule.load+"&ncModuleInit="+window.__ncModule.init),window.__nsModule&&(p+="&nsModuleLoad="+window.__nsModule.load+"&nsModuleInit="+window.__nsModule.init),window.__etModule&&(p+="&etModuleLoad="+window.__etModule.load+"&etModuleInit="+window.__etModule.init),c.src=p,document.body.appendChild(c)}catch(e){console.log(e,"\u4e0a\u62a5\u5f02\u5e38")}return r.__sequence([r.__processToken,r.__processRequestUrl,r.__processUnitPrefix,r.middlewares,r.__processRequest])}if((a.indexOf("RGV587_ERROR::SM")>-1||a.indexOf("ASSIST_FLAG")>-1)&&t.data.url){var l="_m_h5_smt",f=function(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}(l),d=!1;if(!0===i.saveAntiCreepToken&&f)for(var h in f=JSON.parse(f))s[h]&&(d=!0);if(!0===i.saveAntiCreepToken&&f&&!d){for(var h in f)s[h]=f[h];return r.__sequence([r.__processToken,r.__processRequestUrl,r.__processUnitPrefix,r.middlewares,r.__processRequest])}return new o((function(o,a){function u(){p.removeEventListener("close",u),e.removeEventListener("message",c),a("USER_INPUT_CANCEL::\u7528\u6237\u53d6\u6d88\u8f93\u5165")}function c(t){var n;try{n=JSON.parse(t.data)||{}}catch(e){}if(n&&"child"===n.type){var f;p.removeEventListener("close",u),e.removeEventListener("message",c),p.hide();try{for(var d in"string"==typeof(f=JSON.parse(decodeURIComponent(n.content)))&&(f=JSON.parse(f)),f)s[d]=f[d];!0===i.saveAntiCreepToken?(document.cookie=l+"="+JSON.stringify(f)+";",e.location.reload()):r.__sequence([r.__processToken,r.__processRequestUrl,r.__processUnitPrefix,r.middlewares,r.__processRequest]).then(o)}catch(e){a("USER_INPUT_FAILURE::\u7528\u6237\u8f93\u5165\u5931\u8d25")}}}var p=new n("",t.data);p.addEventListener("close",u,!1),e.addEventListener("message",c,!1),p.show()}))}}))}))}(window,window.lib||(window.lib={})),e.exports=window.lib.mtop},function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(e,t,r){var n=r(6),o=r(0),i=o.px,a=o.category;function s(e){if(!(this instanceof s))return new s(e);e=e||{},this._init=!1,this.toolKit=n(e),this.logger=this.toolKit.logger,this.debug=e.debug||!1,!0===e.debug&&this.logger.warn("[wpk] now in debug mode, you can see log details"),this._plugins=e.plugins||[],this.bid=e.bid,this.utdid=e.utdid,this.cid=e.cid,this.uid=e.uid,this.rel=e.rel,this.spa=e.spa||!1,this.delay=!1!==e.delay,this.cluster=e.cluster||"cn",this.sampleRate=e.sampleRate,this.ignoreScriptError=!1!==e.ignoreScriptError,this.onlyCustom=e.onlyCustomInUCCore||e.onlyCustom||!1,this.ignoreU4HA=!0===e.ignoreU4HA,this.beforeSend=e.beforeSend||null,this.checkHidden=!1!==e.checkHidden,this.enableMtop=e.enableMtop||!1,this.supportBeaconBody=!1!==e.supportBeaconBody,this.blockAlipayMiniAppWebview=e.blockAlipayMiniAppWebview||!1,this.maxSessDuration=e.maxSessDuration||288e5,this._waitingQueue=[],this.useNativeCH=!1!==e.useNativeCH}function u(e){if(e.toolKit.inAlipayMiniAppWebview()&&!0===e.blockAlipayMiniAppWebview)e.logger.warn("current runtime is alipay miniapp webview, this request will be blocked.");else{var t=i.confAddr[e.cluster+(e.isHttps?"_https":"")],r=i.signKey;e._startTime=Date.now(),e._dying=!0,e.toolKit.dynamicConf(e.bid,e.VERSION,t,r,(function(t){e._dying=!1,e._dyConf=t,e.logger.warn("jconfig come back")}))}}s.prototype={VERSION:"1.2.1",initialize:function(e){this.env=e.env,e.root.location&&-1!==e.root.location.search.indexOf("wpkReporterDebug=true")&&(this.debug=!0),this.send=e.send,this.getWid=e.getWid,this.isHttps=e.isHttps,e.bindUnloadEvent(this)},ready:function(){return this._init},setConfig:function(e){return this.toolKit.isObject(e)&&this.toolKit.extend(this,e),this},report:function(e){"string"==typeof e&&(e={category:a.JSERR,msg:e});var t=e.sampleRate||this.sampleRate;if(t||0===t||(t=1),this.toolKit.canReport(t)){if(this._cleanData(e),this.ready()){var r;if("function"==typeof this.beforeSend){try{r=this.beforeSend(e)}catch(e){this.logger.error("exec beforeSend failed for:",e)}if(!1===r)return void this.logger.warn("beforeSend func return false");"object"==typeof r&&(e=r)}var n=this.toolKit.getMetas(),o=e.bid||this.bid||n.wpkBid,s=e.cid||this.cid||n.wpkCid,c=e.rel||this.rel||n.wpkRel;this.toolKit.isFunction(c)&&(c=c());var p=e.uid||this.uid;if(this.toolKit.isFunction(p)&&(p=p()),p||(p=this.getWid()),Date.now()-this._begin>=this.maxSessDuration&&(this._begin=Date.now(),this._sid=this.toolKit.getSessionId()),this.toolKit.extend(e,{w_bid:o,w_cid:s,w_rel:c,w_spa:this.spa,w_tm:this.toolKit.timestamp(),w_cnt:1,uid:p,utdid:this.utdid,type:this.toolKit.categoryToType(e.category),sdk_ver:this.VERSION,log_src:"jssdk",uc_param:this.uc_param||"",wid:this.wid}),this._dyConf&&Date.now()<this._dyConf.expireAt){var l=void 0!==this._dyConf[e.type+"@"+e.category]?this._dyConf[e.type+"@"+e.category]:this._dyConf[e.type];if(void 0!==(l=void 0!==l?l:this._dyConf.all)&&!this.toolKit.canReport(l))return void this.logger.warn("\u7531\u4e8e\u300c\u52a8\u6001\u914d\u7f6e\u300d\u91c7\u6837\u7387\u63a7\u5236\uff0c\u672c\u6761\u65e5\u5fd7\u6700\u7ec8\u672a\u4e0a\u62a5\uff0c\u7c7b\u578b: ",e.type,e.category," \u91c7\u6837\u7387: ",l)}else!this._dying&&Date.now()-this._startTime>=18e5&&(this.logger.warn("syncing dynamic config"),u(this));var f={app:o,cp:"none",de:4,seq:this.toolKit.generateSeq(),tm:this.toolKit.timestamp(!0),ud:encodeURIComponent(e.uid),ver:e.w_rel,type:e.type,sver:e.sdk_ver,sign:"9bf8a190ef82c5049df7b199c599c45b"},d=i.addr[this.cluster+(this.isHttps?"_https":"")],h=this.toolKit.objToQueryString(f);this.toolKit.cutStr(e,["c1","c2","c3","c4","c5"],128),this.send(d,h,e)}else this._waitingQueue.push(e),this.logger.warn("sdk\u672a\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u6570\u636e\u5df2\u7f13\u5b58");return this}this.logger.warn("\u7531\u4e8e\u91c7\u6837\u7387\u63a7\u5236\uff0c\u672c\u6761\u65e5\u5fd7\u6700\u7ec8\u672a\u4e0a\u62a5\uff0c\u91c7\u6837\u7387: ",t)},_cleanData:function(e){for(var t,r=1;r<=10;r++)t="bl"+r,e.hasOwnProperty(t)&&(e["w_"+t]=e[t],e[t]=void 0);t=null},reportFlow:function(e){return e=e||{},this.report(this.toolKit.extend(e||{},{category:a.FLOW,sampleRate:1})),this},reportError:function(e,t){return this.toolKit.isError(e)?((t=t||{}).category=a.JSERR,t.w_msg=e.toString(),t.stack=this.toolKit.parseErrorStack(e),t.w_file=e.filename||"",t.w_line=e.lineno||"",t.w_col=e.colno||"",this.report(t),this):this.report(e,t)},reportApi:function(e,t){this.reportApiError(e,t)},reportApiError:function(e,t){return e&&(this.toolKit.isObject(e.queryString)&&(e.queryString=this.toolKit.objToQueryString(e.queryString)),this.report(this.toolKit.extend(t||{},{msg:e.msg||"",w_res:e.url,w_method:e.method,w_param:e.queryString,w_body:JSON.stringify(e.body),w_resp:e.response,w_rc:e.status,w_rt:e.spent||0,c1:e.c1,c2:e.c2,c3:e.c3,c4:e.c4,c5:e.c5},{category:a.API,w_type:16}))),this},reportBlankPage:function(e){return(e=e||{}).hasOwnProperty("w_fp")||this.toolKit.extend(e,{w_fp:999}),this.report(this.toolKit.extend(e||{},{category:a.BKPG})),this},diagnose:function(){this.ready()?this.bid?(this.sampleRate||this.logger.warn("\u6ca1\u6709\u8bbe\u7f6e\u91c7\u6837\u7387\u53c2\u6570sampleRate\uff0c\u5c06\u4f7f\u7528\u9ed8\u8ba4\u91c7\u6837\u7387"),this.report({_diagnose:!0})):this.logger.warn("\u7f3a\u5c11bid\u53c2\u6570,\u8bf7\u786e\u8ba4\u662f\u5426\u5df2\u6b63\u786e\u8bbe\u7f6e"):this.logger.warn("wpkReporter\u5c1a\u672a\u521d\u59cb\u5316\uff0c\u8bf7\u786e\u4fdd\u5df2\u8c03\u7528 install \u65b9\u6cd5")},addPlugin:function(e,t){return this._plugins.push([e,t]),"function"==typeof e&&this._init&&e.apply(this,[this,t]),this},install:function(){u(this);for(var e=r(2),t=this._plugins.length,n=!1,o=0;o<t;o++){var i=this._plugins[o],a=i[0],s=i[1];a.prototype.pluginId===e.prototype.pluginId&&(n=!0),a.apply(this,[this,s])}return this.wid=this.getWid(),this._begin=Date.now(),this._sid=this.toolKit.getSessionId(),this._init=!0,0!==t&&n||(this.toolKit.logger.info("\u6ca1\u6709\u8bbe\u7f6eFlow\uff0c\u5185\u7f6e\u5f00\u542f"),this.addPlugin(e)),this},installAll:function(){var e=[[r(8),{resErr:!0}],[r(9)],[r(10)],[r(2)],[r(11),{params:"prveosfrnwutsv"}]],t=this._plugins.length;if(0===t)this._plugins=e;else{for(var n=[],o=e.length,i=0;i<o;i++){for(var a=e[i],s=0;s<t;s++)if(a[0].prototype.pluginId===this._plugins[s][0].prototype.pluginId){a=this._plugins[s];break}n.push(a)}this._plugins=n}return this.install()},uninstall:function(){return this._plugins=[],this._init=!1,this}},e.exports=s},function(e,t,r){var n=r(0).env,o=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},i=function(e,t){if(t=t||{},e.env===n.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin\u5df2\u5f00\u542f");var i,a,s=function(){e.reportFlow()};"complete"===document.readyState?setTimeout(s,0):e.toolKit.onListen(window,"load",s,!0),e.spa&&(r(7)(),i=function(){o(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},a=function(t){o(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",i),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),s=i=a=null}))}else e.logger.info("wpkflowPlugin\u5df2\u5173\u95ed")};i.prototype.pluginId="flow",e.exports=i},function(e,t,r){(function(t){var n="function"==typeof callNative||"function"==typeof nativeLog;e.exports=r(n?5:"object"==typeof t&&t+""=="[object process]"?13:16)}).call(this,r(4))},function(e){var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,u=[],c=!1,p=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):p=-1,u.length&&f())}function f(){if(!c){var e=a(l);c=!0;for(var t=u.length;t;){for(s=u,u=[];++p<t;)s&&s[p].run();p=-1,t=u.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){var n=r(1),o=r(12);e.exports=function(e){var t=new n(e);return t.initialize(o),t}},function(e,t){var r=function(e){return e||""},n=function(e){var t=Date.now();"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(t+=performance.now());var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:11&r).toString(16)}));return!1===e?r.replace(/-/g,""):r},o=function(e){return"object"==typeof e},i=function(e){var t={}.toString.call(e);return o(e)&&("[object Error]"===t||"[object Exception]"===t||t instanceof Error)},a=function(e){return"[object Array]"==={}.toString.call(e)},s=function(e){return"function"==typeof e},u=function(e){return"string"==typeof e},c=function(e){var t=+new Date;return!0===e&&(t=Math.floor(t/1e3)),t},p=function(e){if(e.stack){var t=e.stack.split("\n");return t.shift(),t.join("\n")}return""},l=function(e){var t;switch(e){case 1:t="jserr";break;case 2:t="api";break;case 3:t="jsfsperf";break;case 4:t="resloadfail";break;case 5:t="flow";break;case 6:t="bkpg";break;case 7:t="harlog";break;default:t="jssdkidx"}return t},f=function(){return c()+Math.floor(10*Math.random())},d=function(e){var t=[];for(var r in e)t.push(r+"="+e[r]);return t.join("&")},h=function(e){return JSON?JSON.stringify(e):e.toString()},g=function(){if("undefined"!=typeof document&&document.getElementsByTagName)for(var e,t,r,n,o=document.getElementsByTagName("meta"),i=o.length,a=0;a<i;a++)"wpk-bid"===(n=o[a]).name?e=n.content:"wpk-cid"===n.name?t=n.content:"wpk-rel"===n.name&&(r=n.content);return{wpkBid:e||null,wpkCid:t||null,wpkRel:r||null}},v=function(e,t,r,n){return e.addEventListener?e.addEventListener(t,(function o(i){n&&e.removeEventListener(t,o,!1),r.call(this,i)}),!1):e.attachEvent&&e.attachEvent("on"+t,(function o(i){n&&e.detachEvent("on"+t,o),r.call(this,i)})),this},y=function(e,t,r){return r?(e.removeEventListener?e.removeEventListener(t,r):e.detachEvent&&e.detachEvent(t,r),this):this},m=function(e){return!!e&&0!==e&&(e>=1||"100%"===e||(/^\d+(\.\d+)?%$/.test(e)?Math.random()<parseFloat(e)/100:e>0&&e<1&&Math.random()<e))},w="wpk-reporter",_=function(e,t){var r=[].slice.call(t);e.apply(this,[w].concat(r))},b=function(e){var t="";switch(e.category){case 1:t=[e.category,e.uid,e.w_url,e.w_ref,e.w_msg||"",e.w_line||"",e.w_col||""].join("");break;case 2:t=[e.category,e.uid,e.w_res,e.w_method,e.w_rc].join("");break;case 4:t=[e.category,e.uid,e.w_url,e.w_ref,e.w_res,e.w_type].join("")}return t},x=function(e,t){e=e||!1;try{if("undefined"!=typeof window&&window.ucweb&&window.ucweb.window||t){for(var r=(t||navigator.userAgent).split(" "),n=r.length,o=!1,i=!1,a=0;a<n;a++)if(-1!==r[a].indexOf("UWS/")){var s=r[a].split("/");i=E(s[1],"2.13.2.37")}else-1!==r[a].indexOf("AliApp(DingTalk/")&&(o=!0);return o?i:e}}catch(e){}return!1},E=function(e,t){try{for(var r,n,o=e.split("."),i=t.split("."),a=o.length,s=0;s<a;s++)if((r=parseInt(o[s]))!==(n=parseInt(i[s])))return r>n;return!0}catch(e){}return!1},S=function(e){try{var t="__wpktestingls__";return e().setItem(t,t),e().removeItem(t),!0}catch(e){return!1}};function O(){return localStorage}var R={get:function(e){if(S(O)){var t=O().getItem(e);if(t){if(t=JSON.parse(t),Date.now()<t.expireAt)return t;this.rm(e)}}return null},set:function(e,t){S(O)&&e&&t&&(t.expireAt=Date.now()+18e5,O().setItem(e,JSON.stringify(t)))},rm:function(e){S(O)&&O().removeItem(e)}};function T(){return sessionStorage}var A=function(){var e=n();return S(T)&&T().setItem("wpkreporter:frmid",e),e},I=function(e,t){if(t){if(1===t.length)return e===t[0];if(2===t.length){var r=t[0],n=t[1];return r&&!n?o(e,r):r&&n?o(e,r)&&o(n,e):o(n,e)}return!1}return!0;function o(e,t){var r=e.split("."),n=t.split(".");return!(parseInt(r[0])<parseInt(n[0]))&&(parseInt(r[0])>parseInt(n[0])||!(parseInt(r[1])<parseInt(n[1]))&&(parseInt(r[1])>parseInt(n[1])||parseInt(r[2])>=parseInt(n[2])))}},C=function(e,t,r,o,i){var a="wpkreporter:dynamicConf:"+e,u=R.get(a);if(u)s(i)&&i(u);else{var p={app:e,tm:c(!0),ud:n(),sver:t,sign:"c41e43c828c16c16a6eb1c9c1e68e8ce"},l=d(p);!function(e,t){if("undefined"==typeof XMLHttpRequest)t();else{var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e;if(200===r.status&&r.response)try{var n=JSON.parse(r.response);0===n.code&&(e=n.config||[])}catch(e){}t(e)}};try{r.open("GET",e,!0),r.timeout=3e3,r.send()}catch(e){}}}(r+"?wpk-header="+encodeURIComponent(l),(function(e){if(u={},void 0!==e){for(var r=e.length,n=0;n<r;n++){var o=e[n],c=o.sdkver;if(I(t,c)){if(o.common&&void 0!==o.common.sampleRate&&(u.all=o.common.sampleRate),o.config)for(var p,l=o.config.length,f=0;f<l;f++)if((p=o.config[f]).type){if(p.category_rate)for(var d in p.category_rate)u[p.type+"@"+d]=p.category_rate[d];p.sampleRate&&(u[p.type]=p.sampleRate)}break}}R.set(a,u)}s(i)&&i(u)}))}},N=function(e,t,r){for(var n,o=t.length,i=0;i<o;i++)"string"==typeof(n=e[t[i]])?e[t[i]]=n.substring(0,r):"object"==typeof n&&(e[t[i]]=String(n))},k="undefined"!=typeof navigator?(navigator.userAgent||"").toLowerCase():"",q=function(){return k.indexOf("ucbrowser/")>-1},L=function(){return k.indexOf("quark/")>-1},j=function(){var e=!1;try{if("undefined"!=typeof navigator){var t=-1!==navigator.userAgent.indexOf("Alipay"),r=-1!==navigator.userAgent.indexOf("MiniProgram"),n=-1!==navigator.userAgent.indexOf("APXWebView");e=t&&(r||n)}}catch(e){}return e};e.exports=function(e){return{noop:r,uuid:n,isError:i,isArray:a,isObject:o,isFunction:s,isString:u,getSessionId:A,logger:"undefined"!=typeof console&&o(console)&&e.debug?{trace:function(){_(console.trace,arguments)},debug:function(){_(console.debug,arguments)},log:function(){_(console.log,arguments)},info:function(){_(console.info,arguments)},warn:function(){_(console.warn,arguments)},error:function(){_(console.error,arguments)}}:{trace:r,debug:r,log:r,info:r,warn:r,error:r},extend:function(e){for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},some:function(e,t){if(!this.isArray(e)||!this.isFunction(t))return!1;for(var r,n=e.length,o=0;o<n;o++)if(r=e[o],t.call(this,r))return!0;return!1},filter:function(e,t){var r=[];try{for(var n=0,o=e.length;n<o;n++)t.call(this,e[n],n,e)&&r.push(e[n]);return r}catch(e){}return e},forEach:function(e,t){if(this.isArray(e)&&this.isFunction(t))for(var r,n=e.length,o=0;o<n;o++)r=e[o],t.call(this,r,o,e)},trim:function(e){if(this.isString(e))return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},canReport:m,onListen:v,offListen:y,getMetas:g,timestamp:c,generateSeq:f,categoryToType:l,parseErrorStack:p,objToJsonString:h,objToQueryString:d,genContentHash:b,isU4HA:x,isUC:q,isQuark:L,cutStr:N,dynamicConf:C,inAlipayMiniAppWebview:j}}},function(e,t){var r=window.history||{},n=window.document,o=function(e,t){var r;window.CustomEvent?r=new CustomEvent(e,{detail:t}):((r=n.createEvent("HTMLEvents")).initEvent(e,!1,!0),r.detail=t),window.dispatchEvent(r)},i=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=r[e];"function"==typeof t&&(r[e]=function(e,n,a){var s=location.href,u=t.call(r,e,n,a);if(!a||"string"!=typeof a)return u;if(a===s)return u;try{var c=s.split("#"),p=a.split("#"),l=i(c[0]),f=i(p[0]),d=c[1]&&c[1].replace(/^\/?(.*)/,"$1"),h=p[1]&&p[1].replace(/^\/?(.*)/,"$1");l!==f?o("historystatechange",f):d!==h&&o("historystatechange",h)}catch(e){}return u},r[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replateState")}},function(e,t,r){var n,o,i=r(0),a=i.env,s=i.category,u=function(e){return"function"==typeof e},c={},p=function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):(c["on"+t]=function(){return r.call(e,window.event)},e.attachEvent("on"+t,c["on"+t]))},l=function e(t,r){var n=t.id?"#"+t.id:"",o="";t.className&&"string"==typeof t.className&&(o="."+t.className.split(" ").join("."));var i=t.tagName.toLowerCase();return t.parentNode&&t.parentNode.tagName&&r-1!=0?e(t.parentNode,r-1)+" > "+i.toLowerCase()+n+o:i+n+o},f=function(e,t,r,i,a,c){if(n)try{n.call(this,t,r,i,a,c)}catch(c){}if("script error."===(t||"").toLowerCase()){if(e.ignoreScriptError||o.ignoreScriptError)return void e.logger.warn("\u914d\u7f6e\u4e86ignoreScriptError\uff0c\u672c\u6b21\u5f02\u5e38\u5c06\u4e0d\u4e0a\u62a5");t="Script error",c=c||{}}if(!u(o.jsErrFilter)||o.jsErrFilter.call(this,event)){if(null!=c){var p=(c.stack||"").split("\n");p.shift();var l={w_msg:t,w_file:r||"",w_line:i||"",w_col:a||"",stack:p.join("\n"),category:s.JSERR,sampleRate:o.jsErrSampleRate};e.report(l)}}else e.logger.warn("jserrFilter \u8fd4\u56defalse\uff0c\u672c\u6b21\u65e5\u5fd7\u5c06\u4e0d\u4e0a\u62a5, event: ",event)},d=function(e,t){var r=window;r&&e.env===a.BROWSER?(e.logger.info("wpkglobalerrorPlugin\u5df2\u5f00\u542f"),!1!==(o=e.toolKit.extend({jsErrSampleRate:1,resErrSampleRate:1},t)).jsErr?(n=r.onerror,r.onerror=function(t,r,n,o,i){f(e,t,r,n,o,i)},p(r,"unhandledrejection",(function(t){var r=t.type;"string"==typeof t.reason?r=t.reason:t.reason&&"object"==typeof t.reason&&t.reason.message&&(r=t.reason.message),f(e,r,null,null,null,t.reason||t.type)}))):e.logger.warn("js\u5f02\u5e38\u76d1\u63a7\u5df2\u5173\u95ed"),o.resErr?p(r,"error",(function(t){!function(e,t){if(!t.target.tagName||t.message||t.filename||t.lineno||t.colno)e.logger.warn("\u975e\u8d44\u6e90\u83b7\u53d6\u95ee\u9898\uff0c\u8df3\u51fa\u5904\u7406, event: ",t);else if(!u(o.resErrFilter)||o.resErrFilter.call(this,t)){var r=t.target.src||t.target.href;r===window.location.href&&(r="EMPTY_SRC");var n,i=function(e){var t=-1;switch(e.tagName.toLowerCase()){case"img":t=1;break;case"link":e.rel&&"stylesheet"===e.rel.toLowerCase()&&(t=2);break;case"script":t=3;break;case"video":t=11}return t}(t.target);11===i&&t.target.error&&(n=t.target.error.code),e.report({category:s.RESLOADFAIL,sampleRate:o.resErrSampleRate,msg:r+" \u52a0\u8f7d\u5931\u8d25",w_res:r,w_type:i,w_err:n,w_xpath:l(t.target,5)})}else e.logger.warn("reserrFilter \u8fd4\u56defalse\uff0c\u672c\u6b21\u65e5\u5fd7\u5c06\u4e0d\u4e0a\u62a5, event: ",t)}(e,t)}),!0):e.logger.warn("\u8d44\u6e90\u52a0\u8f7d\u5f02\u5e38\u76d1\u63a7\u5df2\u5173\u95ed")):e.logger.warn("\u5168\u5c40\u9519\u8bef\u76d1\u63a7\u63d2\u4ef6\u4e0d\u652f\u6301\u975e\u6d4f\u89c8\u5668\u73af\u5883")};d.prototype.pluginId="gerror",e.exports=d},function(e,t,r){var n=r(0),o=n.sdk,i=n.http.methods,a=n.category,s=function(e){return e>=200&&e<=299},u=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")&&-1===e.indexOf("//log.m.sm.cn/0.gif")},c=function(e,t){if(e.hasOwnProperty(t))return e[t]},p=function(e,t,r){e.toolKit.isObject(r)&&e.toolKit.extend(t,{c1:c(r,"c1"),c2:c(r,"c2"),c3:c(r,"c3"),c4:c(r,"c4"),c5:c(r,"c5"),bl1:c(r,"bl1"),bl2:c(r,"bl2"),bl3:c(r,"bl3"),bl4:c(r,"bl4"),bl5:c(r,"bl5")}),e.report(t)},l=location.origin,f=function(e){return!e||0===e.indexOf(l)||!/^(\/\/|http:|https:).*/.test(e)};function d(e,t){var r=null;try{var n,o,i,a=e.toolKit.trim(t||"").split(/[\r\n]+/);a.length>0&&(r={},e.toolKit.forEach(a,(function(e){n=e.split(": "),o=n.shift(),i=n.join(": "),r[o]=i})))}catch(e){}return r}function h(e,t,r){var n={};return e.toolKit.forEach(Object.getOwnPropertyNames(t),(function(e){-1!==r.indexOf(e)&&(n[e]=t[e])})),n}function g(e){try{if(!e)return{};var t={};return e.forEach((function(e,r){t[r]=e})),t}catch(e){return{}}}var v=function(e,t){if(e.env===n.env.BROWSER&&window){var r={enable:!0,sampleRate:1,enableTrace:!1,enableCorsTrace:function(e){return!1},requestHeaders:{"x-wpk-reqid":function(){return e.toolKit.uuid(!1)},"x-wpk-bid":function(){return e.bid}},responseHeaders:["x-eagleeye-id","x-wpk-serverid"]},c=e.toolKit.extend(r,t);c.enable?(e.logger.info("wpkinterfacePlugin\u5df2\u5f00\u542f"),"XMLHttpRequest"in window&&function(e,t){var r=window.XMLHttpRequest.prototype,n=r.open;r.open=function(r,o){this.__reqCtx__={method:r,url:o||"",start:Date.now()};var i=[].slice.call(arguments);n.apply(this,i);var a=this;t.enableTrace&&(f(o)||t.enableCorsTrace(o))&&e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){var r=t.requestHeaders[e]();a.setRequestHeader(e,r)}))};var c=r.setRequestHeader;r.setRequestHeader=function(e,t){var r=[].slice.call(arguments);c.apply(this,r),this.__reqCtx__&&(this.__reqCtx__.headers||(this.__reqCtx__.headers={}),this.__reqCtx__.headers[e]=t)};var l=r.send;r.send=function(r){var n=this;function c(){if(n.__reqCtx__&&4===n.readyState)try{var c=Date.now(),l=(n.responseURL||n.__reqCtx__.url).split("?"),f=l[0],g=l[1]||"",v="",y=n.__reqCtx__.headers||{};n.__reqCtx__.method.toUpperCase()!==i.GET&&r&&(v=JSON.stringify(r));var m=d(e,n.getAllResponseHeaders()),w=String(n.response),_=!0,b={};"function"==typeof t.errorFilter&&(_=!!(b=t.errorFilter.call(this,{url:f,status:n.status,response:w,body:v,queryString:g,reqHeaders:y,resHeaders:m})),e.logger.warn("api errorFilter\u6267\u884c\u7ed3\u679c\uff1a",b)),w.length>2048&&(w="[response content too large]");var x=c-n.__reqCtx__.start;if(_&&x<121e3&&u(f)){var E=b.bizCode||n.status,S=b.reqHeaders||y,O=b.resHeaders||h(e,m,t.responseHeaders),R={category:a.API,sampleRate:t.sampleRate,w_res:f,w_param:g,w_body:s(E)||!t.withBody?"":v,w_method:n.__reqCtx__.method,w_rc:E,w_rt:x,w_resp:s(E)||!t.withResp?"":b.resp||w,w_hd:JSON.stringify(S),w_trace_reqid:S&&S["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(O),w_trace_serverid:O&&O["x-wpk-serverid"]||void 0,msg:b.msg||"",w_type:16};p(e,R,b)}}catch(t){e.reportError(t,{bid:o.BID,cid:o.CID,category:a.JSERR,sampleRate:1})}}if("onreadystatechange"in n&&"function"==typeof n.onreadystatechange){var f=n.onreadystatechange;n.onreadystatechange=function(){var e=[].slice.call(arguments);c.apply(this,e),f.apply(this,e)}}else n.onreadystatechange=c;var g=[].slice.call(arguments);return l.apply(this,g)}}(e,c),"fetch"in window&&function(e,t){var r=window.fetch;window.fetch=function(){var n=[].slice.call(arguments),c=i.GET;n[1]&&n[1].method&&(c=n[1].method.toUpperCase());var l,d=n[0];l="string"==typeof d?d:d instanceof URL?d.toString():d.url||"",t.enableTrace&&(f(l)||t.enableCorsTrace(l))&&(n[1]?void 0===n[1].headers&&(n[1].headers={}):n[1]={headers:{}},e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){n[1].headers[e]=t.requestHeaders[e]()})));var v=Date.now();return r.apply(this,n).then((function(r){try{var l=Date.now(),f=(r.url||n[0]).split("?"),d=f[0],y=f[1]||"",m="",w=null;n[1]&&(w=n[1].headers),c!==i.GET&&n[1]&&n[1].body&&(m=JSON.stringify(n[1].body));var _=r.clone(),b=g(_.headers);_.text().then((function(n){n=n||"";var o=!0,i={};if("function"==typeof t.errorFilter&&(o=!!(i=t.errorFilter.call(this,{url:d,status:r.status,response:n,body:m,queryString:y,reqHeaders:w,resHeaders:b})),e.logger.warn("api errorFilter\u6267\u884c\u7ed3\u679c\uff1a",i)),n=n.length>2048?"[response content too large]":n,o&&l-v<121e3&&u(d)){var f=i.bizCode||r.status,g=i.reqHeaders||w,_=i.resHeaders||h(e,b,t.responseHeaders),x={category:a.API,sampleRate:t.sampleRate,w_res:d,w_param:y,w_body:s(f)||!t.withBody?"":m,w_method:c,w_rc:f,w_rt:l-v,w_resp:s(f)||!t.withResp?"":i.resp||n,w_hd:JSON.stringify(g),w_trace_reqid:g&&g["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(_),w_trace_serverid:_&&_["x-wpk-serverid"]||void 0,msg:i.msg||"",w_type:16};p(e,x,i)}}))}catch(t){e.reportError(t,{bid:o.BID,cid:o.CID,category:a.JSERR,sampleRate:1})}return r})).catch((function(e){throw e}))}}(e,c),(e.enableMtop||c.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(r){var n=this.params,i=this.options,c=Date.now();return r().then((function(){try{if(i.H5Request&&(i.getJSON||i.postJSON))return void e.logger.debug("\u8bc6\u522b\u5230\u8bf7\u6c42\u4e3axhr, api\u76d1\u63a7\u4ea4\u7531xhr\u7684\u65b9\u5f0f\u5904\u7406");var r,l=i.retJson||{},f=Date.now()-c,d=l.code||200,h=n.type,g=n.api,v=e.toolKit.objToQueryString(i.querystring),y=i.postdata&&i.postdata.data?e.toolKit.objToJsonString(i.postdata.data):null,m=e.toolKit.objToJsonString(l.data||{}),w=l.ret;w instanceof Array&&(w=w.join(",")),-1===w.indexOf("SUCCESS")&&(r=w);var _=!0,b={};if("function"==typeof t.errorFilter&&(_=!!(b=t.errorFilter.call(this,{url:g,status:d,response:m,body:y,queryString:v,msg:r})),e.logger.warn("api errorFilter\u6267\u884c\u7ed3\u679c\uff1a",b)),_&&f<121e3&&u(g)){var x=b.bizCode||d,E={category:a.API,sampleRate:t.sampleRate,w_res:g,w_param:v,w_body:s(x)||!t.withBody?"":y,w_method:h,w_rc:x,w_rt:f,w_resp:s(x)||!t.withResp?"":b.resp||m,msg:b.msg||r||"",w_type:16};p(e,E,b)}}catch(t){e.reportError(t,{bid:o.BID,cid:o.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,c))):e.logger.info("wpkinterfacePlugin\u5df2\u5173\u95ed")}};v.prototype.pluginId="api",e.exports=v},function(e,t,r){var n,o=r(0).env,i=r(0).category,a=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","msFirstPaint"],s=["navigate","reload","back_forward"],u=function(e){var t,r;if(n&&n.getEntriesByType)try{for(var o=n.getEntriesByType("paint"),i=0;i<o.length;i++){var s=o[i];"first-paint"===s.name?t=parseFloat(s.startTime.toFixed(2)):"first-contentful-paint"===s.name&&(r=parseFloat(s.startTime.toFixed(2)))}}catch(e){console.error(e)}var u=e[a[13]]-e[a[5]];return{w_n_rve:u?parseFloat(u.toFixed(2)):u,fpt:t,fcp:r}},c=function(e,t){var r,n,o,i={},s=e._ver||1;for(var u in t)o=0,r=e[a[t[u][0]]],n=e[a[t[u][1]]],(2===s?r>=0:r>0)&&n>0&&(o=parseFloat((n-r).toFixed(2))),i[u]=o;return i},p=function(e,t){var r=window;if(n=r.performance||r.webkitPerformance||r.msPerformance||r.mozPerformance,e.env===o.BROWSER&&n&&n.timing){t=t||{};var a=e.toolKit.extend({enable:!0,sampleRate:1,collectResTiming:!1,minLoadTiming:3e3,maxLoadTiming:8e3,minLoadSpr:.05,maxLoadSpr:1},t);if(a.enable){e.logger.info("wpkperformancePlugin\u5df2\u5f00\u542f");var p=n.timing||{},l=1;if("function"==typeof r.PerformanceNavigationTiming)try{var f=n.getEntriesByType("navigation")[0];f&&(p=f,l=2)}catch(e){}p._ver=l;var d=function(){/loaded|complete/.test(document.readyState)&&setTimeout((function(){var t=e.toolKit.extend(function(e){return c(e,{w_unload:[1,2],w_redirect:[3,4],w_appcache:[5,6],w_dns:[6,7],w_tcp:[8,10],w_ssl:[9,10],w_ttfb:[11,12],w_contentdownload:[12,13],w_domparsing:[13,15],w_res:[17,19]})}(p),function(e){var t=c(e,{w_firstbyte:[5,12],w_tti:[5,15],w_domready:[5,17],w_load:[5,19],w_total:[5,20]}),r=u(e);return t.w_n_rve=r.w_n_rve,t.wl_fcp=r.fcp,t.wl_fp=r.fpt,t}(p));for(var r in t)if(t[r]<0||t[r]>6e4)return void e.logger.warn("\u6027\u80fd\u6570\u636e\u5f02\u5e38\uff1a",r,t[r]);var o=e.toolKit.extend(t,function(e){var t,r=n.navigation||{},o=-1,i=-1,a=-1;return 1===e._ver?t=s[r.type]||"other":2===e._ver&&(o=e.encodedBodySize,i=e.decodedBodySize,a=e.transferSize,t=e.type),{w_enbdsize:o,w_debdsize:i,w_transize:a,w_navtype:t}}(p),a,{category:i.JSFSPERF});if(e.report(o),(a.collectResTiming||e.toolKit.isQuark()||e.toolKit.isUC())&&!e._hasCollectResTiming){e.logger.info("\u5df2\u5f00\u542f\u6162\u6027\u80fdresource\u91c7\u96c6\u80fd\u529b");var l=0;t.w_load>=a.minLoadTiming&&t.w_load<=a.maxLoadTiming?l=a.minLoadSpr:t.w_load>a.maxLoadTiming&&(l=a.maxLoadSpr),l&&n&&"function"==typeof n.getEntriesByType&&(e.report({category:i.RESTIMING,sampleRate:l,bl1:JSON.stringify(n.getEntriesByType("resource")),bl2:n.timeOrigin||n.timing.fetchStart,_forcePost:!0}),e._hasCollectResTiming=!0)}}))};"complete"===document.readyState?d():function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):e.attachEvent("on"+t,r)}(window,"load",(function(){d()}))}else e.logger.info("wpkperformancePlugin\u5df2\u5173\u95ed")}else e.logger.warn("\u57fa\u7840\u6027\u80fd\u63d2\u4ef6\u4ec5\u652f\u6301\u6d4f\u89c8\u5668\u73af\u5883")};p.prototype.pluginId="perf",e.exports=p},function(e,t,r){var n=r(0).env,o=function(e,t){if(t=t||{},-1!==[n.BROWSER,n.WEEX].indexOf(e.env)&&t.params&&"string"==typeof t.params){e.logger.info("wpkucparamPlugin\u5df2\u5f00\u542f");for(var r=t.params,o=["pr","ve","os","fr","nw","ut","sv"],i=0;i<5;i++){var a=o[i];-1===r.indexOf(a)&&(r+=a)}try{"undefined"!=typeof ucapi&&"function"==typeof ucapi.invoke&&(e.uc_param_str=r,ucapi.invoke("biz.ucparams",{params:r,success:function(t){e.uc_param=t||"",e.uc_param_str=""},fail:function(t){e.logger.error("get uc_param_str error: ",t)}}))}catch(t){e.logger.error("get uc_param_str error: ",t),e.uc_param_str=r}}};o.prototype.pluginId="ucparam",e.exports=o},function(e,t,r){var n=r(0),o="undefined"!=typeof weex?weex:{},i=function(){var e={wx_pf:WXEnvironment.platform,wx_ver:WXEnvironment.weexVersion,wx_app:WXEnvironment.appName,wx_app_ver:WXEnvironment.appVersion,wx_os:WXEnvironment.osName,wx_os_ver:WXEnvironment.osVersion,wx_dev_md:WXEnvironment.deviceModel,dsp_w:WXEnvironment.deviceWidth,dsp_h:WXEnvironment.deviceHeight};if(void 0!==weex.config.uc)try{var t=JSON.parse(weex.config.uc.ucParams);e.net=t.nw,e.wx_app=t.pr,e.wx_app_ver=t.ve}catch(e){}return"undefined"!=typeof weex&&weex.config&&weex.config.bundleType&&"Vue"!==weex.config.bundleType&&"vue"!==weex.config.bundleType?("undefined"!=typeof location?e.wx_bdl_url=location.href:e.wx_bdl_url="undefined"!=typeof weex&&weex.config?weex.config.bundleUrl:"unknow",e.wx_bdl_type="Rax"):(e.wx_bdl_url=weex.config.bundleUrl,e.wx_bdl_type="Vue"),e.wx_bdl_name=function(e){try{var t=e.substring(e.lastIndexOf("/")+1);return-1===t.lastIndexOf(".")?t:t.substring(0,t.lastIndexOf("."))}catch(e){return""}}(e.wx_bdl_url),e};e.exports={env:n.env.WEEX,root:o,isHttps:!1,send:function(e,t,r){var n=this.toolKit.extend(i(),r,{w_frmid:this._sid});n.fr=n.wx_os,n.rom=n.wx_os_ver,n.brand=n.wx_dev_md,n.model=n.wx_dev_md,n.browser=n.wx_app,n.bver=n.wx_app_ver,n.w_url=n.wx_bdl_name,n.w_send_mode="weexfetch";var o=encodeURIComponent(t),a=encodeURIComponent(this.toolKit.objToJsonString(n));weex.requireModule("stream").fetch({url:e,method:"POST",headers:{"wpk-header":o},body:a},(function(e,t){}))},getWid:function(){return this.toolKit.uuid()},bindUnloadEvent:function(){}}},function(e,t,r){var n=r(1),o=r(14);e.exports=function(e){var t=new n(e);return t.initialize(o),t}},function(e,t,r){(function(t){var n=r(0),o=t;e.exports={env:n.env.NODEJS,root:o,send:function(e,t,r){}}}).call(this,r(15))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(1),o=r(17);e.exports=function(e){var t=new n(e);return t.initialize(o),t}},function(e,t,r){var n=r(0),o="undefined"!=typeof window?window:"undefined"!=typeof self?self:{},i=o.document,a=o.navigator,s=o.location,u=void 0!==o.devicePixelRatio?o.devicePixelRatio:1,c={},p=null,l=null,f=function(e,t,r,n,o){if(void 0===t){var a,s;if(!c[e]){a=new RegExp(e+"=([^;]+)");try{s=a.exec(i.cookie)}catch(e){return null}s&&(c[e]=s[1])}return c[e]}var u=e+"="+t;n&&(u+="; domain="+n),o&&(u+="; path="+o),r&&(u+="; max-age="+r);try{return i.cookie=u,!!i.cookie}catch(e){return!1}},d=function(e,t){!function(e,t,r,n){void 0!==window.ucapi&&"function"==typeof window.ucapi.invoke?(t&&(t.success=r,t.fail=n),window.ucapi.invoke(e,t)):n&&n("ucapi is not exist")}("webMonitor.reportWpkLog",e,(function(e){t.logger.warn("log reported success by jsapi",e)}),(function(e){t.logger.warn("log report failed by jsapi",e)}))},h=function(e){var t=window,r="wpkimgreporter_"+ +new Date+".r"+Math.floor(1e3*Math.random()),n=t[r]=new Image;n.onload=n.onerror=function(){t[r]=null},n.src=e},g=function(e){var t,r=e._waitingQueue;if(e.checkHidden&&i&&i.hidden)return e.logger.warn("\u5f53\u524d\u9875\u9762\u4e0d\u53ef\u89c1\uff0c\u65e5\u5fd7\u6570\u636e\u5c06\u4e22\u5f03: ",r),void(e._waitingQueue=[]);null===p&&(t=(navigator?navigator.userAgent:"").toLowerCase(),p=t.indexOf("windvane")>-1&&/(iphone|ipad|ipod|ios)/i.test(t)),null===l&&(l=e.useNativeCH&&function(e){try{return"undefined"!=typeof window&&void 0!==window.nativeWpkReport&&1===(window.nativeWpkReport||{})[e]}catch(e){return!1}}("enablePerformanceReport"));var n=a&&a.sendBeacon&&o.Blob,s=e.supportBeaconBody&&!p;if(l){for(var u=0;u<r.length;u++)try{var c=r[u];c.w_send_mode="jsapi",c._servAddr=void 0,c._hash=void 0,d({type:c.type,immediate:"jsfsperf"===c.type?0:1,args:c},e)}catch(e){}e._waitingQueue=[]}else if(n&&s){var f,g,v=function(e){for(var t,r,n=[],o=[],i=e.length,a=0;a<i;a++)r=e[a].category,-1===o.indexOf(r)&&o.push(r);t=o.length;for(var s=0;s<t;s++){r=o[s];for(var u=[],c=0;c<i;c++){var p=e[c];p.category===r&&u.push(p)}n[s]=u}return n}(r),y=v.length;try{for(var m,w=0;w<y;w++){m=(f=v[w])[0]._servAddr,g=f.length;for(var _=0;_<g;_++)f[_].w_send_mode="sendbeacon",f[_]._servAddr=void 0,f[_]._hash=void 0,f[_]=e.toolKit.objToJsonString(f[_]);a.sendBeacon(m,encodeURIComponent(f.join("\n")))}e._waitingQueue=[]}catch(e){}}else{for(var b,x,E,S=0;S<r.length;S++){x=(b=r[S])._servAddr,E=b._forcePost,b.w_send_mode=E?"fetch":n?"sendbeacon":"imgsrc",b._servAddr=void 0,b._hash=void 0,b._forcePost=void 0,b=encodeURIComponent(e.toolKit.objToJsonString(b));try{!0===E&&"function"==typeof fetch?fetch(x,{method:"POST",body:b}).then((function(){})).catch((function(){})):n?a.sendBeacon(x+"&data="+b):h(x+"&data="+b)}catch(e){}}e._waitingQueue=[]}},v=null,y=function(e){clearTimeout(v),v=null,g(e)},m=function(e){y(e)};e.exports={env:n.env.BROWSER,root:o,isHttps:s.protocol===n.http.protocols.HTTPS,send:function(e,t,r){var c=this;if(!c.ignoreU4HA&&c.toolKit.isU4HA(c.onlyCustom)&&r.category<100)c.logger.warn("\u5728u4\u5185\u6838\u73af\u5883\uff0c\u5c4f\u853d\u975e\u81ea\u5b9a\u4e49\u7684\u6240\u6709\u81ea\u52a8\u6253\u70b9");else if(c.toolKit.inAlipayMiniAppWebview()&&!0===c.blockAlipayMiniAppWebview)c.logger.warn("current runtime is alipay miniapp webview, this request will be blocked.");else{var p=c.toolKit.extend(function(e){if(!i)return{};var t,r=i.referrer;return r&&-1!==r.indexOf('"')&&(r=encodeURIComponent(i.referrer)),{w_url:s.origin+s.pathname,w_query:s.search,w_ref:s.hash.substring(1),w_title:i.title,ua:a.userAgent,referrer:r,dsp_dpi:u||1,dsp_w:o.screen.width,dsp_h:o.screen.height,net:(t=a.connection,t&&t.type?t.type===n.navConn.types.NONE?"disconnected":t.type===n.navConn.types.CELLULAR?t.effectiveType===n.navConn.effectiveTypes.SLOW2G?"2g":t.effectiveType:t.type:"")}}(c.spa),r,{w_frmid:c._sid});if(c.logger.warn("logData to send: ",e,p),e+="?wpk-header="+encodeURIComponent(t),c.uc_param_str&&(e+="&uc_param_str="+c.uc_param_str),!0===r._diagnose)return p=encodeURIComponent(c.toolKit.objToJsonString(p)),void window.open(e+"&data="+p);p._servAddr=e,p._hash=c.toolKit.genContentHash(p);var l,f,d=c.delay&&-1!==[1,2,4].indexOf(p.category);!function(e,t){var r=e._waitingQueue,n=r.length,o=t.reduplication||e.reduplication||!0,i=!0;if(1===t.category&&o&&0!==n){for(var a,s=0;s<n;s++)if((a=r[s])._hash===t._hash){a.w_cnt++,i=!1;break}i&&r.push(t)}else r.push(t);return i}(c,p)&&d?c.logger.warn("logData\u88ab\u5408\u5e76: ",p):(l=function(){y(c)},v=-1==(f=d?3e3:-1)?(l(),null):setTimeout(l,f||0))}},getWid:function(){var e=f(n.sdk.WID_KEY);return e||(e=this.toolKit.uuid(),f(n.sdk.WID_KEY,e,15552e3)),e},bindUnloadEvent:function(e){window&&(window.addEventListener?window.addEventListener("beforeunload",(function(t){m(e)}),!1):window.attachEvent&&window.attachEvent("onbeforeunload",(function(t){m(e)})))}}}])},function(e,t,r){e.exports=r(16)},function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(o>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(e.charAt(n))>>>6-2*o);return t}},e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){e.exports=function(e,t){var r,n,o,i,a,s,u,c;for(r=3&e.length,n=e.length-r,o=t,a=3432918353,s=461845907,c=0;c<n;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,o=27492+(65535&(i=5*(65535&(o=(o^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:o^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}},function(e,t){void 0!==typeof e&&(e.exports=function(e,t){for(var r,n=e.length,o=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o=1540483477*(65535&(o^=255&e.charCodeAt(i)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0})},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return h})),r.d(t,"Request",(function(){return b})),r.d(t,"Response",(function(){return E})),r.d(t,"DOMException",(function(){return O})),r.d(t,"fetch",(function(){return R}));var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in n,u="ArrayBuffer"in n;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||p(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var e,t,r,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=v(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=l(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[l(e)]},h.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},h.prototype.set=function(e,t){this.map[l(e)]=f(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),_.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},w.call(b.prototype),w.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var O=n.DOMException;try{new O}catch(e){(O=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function R(e,t){return new Promise((function(r,o){var i=new b(e,t);if(i.signal&&i.signal.aborted)return o(new O("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;setTimeout((function(){r(new E(o,n))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new O("Aborted","AbortError"))}),0)},s.open(i.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof h?i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,f(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",c)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}R.polyfill=!0,n.fetch||(n.fetch=R,n.Headers=h,n.Request=b,n.Response=E)},function(e,t,r){"use strict";r.r(t),r.d(t,"getTreatment",(function(){return ue}));var n,o={};function i(e,t){for(var r=String(e).split("."),o=String(t).split("."),i=0;i<Math.min(r.length,o.length);i++){var a=Number(r[i]),s=Number(o[i]);if(a>s)return n.GreaterThan;if(s>a)return n.LessThan;if(!isNaN(a)&&isNaN(s))return n.GreaterThan;if(isNaN(a)&&!isNaN(s))return n.LessThan}return n.EqualTo}r.r(o),r.d(o,"MD5",(function(){return f})),r.d(o,"murmurhash3",(function(){return d})),r.d(o,"hashCode",(function(){return h})),function(e){e[e.LessThan=-1]="LessThan",e[e.EqualTo=0]="EqualTo",e[e.GreaterThan=1]="GreaterThan"}(n||(n={}));var a=r(3),s=r.n(a),u=r(1),c=r.n(u),p=r(4),l=1e3;function f(e){var t=s()(e);return c()(t,16).abs().mod(l)}function d(e,t){var r=Object(p.murmur3)(e,t);return c()(r).abs().mod(l)}function h(e){e=""+e;var t,r=0;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)&4294967295;return c()(r).abs().mod(l)}var g="https://s.alicdn.com/@xconfig/dataphant",v="MD5";function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function m(e,t){return e+"_"+t}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}var _={segmentID:null,remainder:null,treatment:"",treatmentID:null,variantId:null,params:{},message:""};function b(e,t,r){var n=w({},_),o=e.experiments,i=e.trafficSourceExperiments,a=void 0===i?[]:i,s=e.whiteList,u=o.find((function(e){return e.testKey===r}));return u?x({expConfig:u,trafficSourceExperiments:a,whiteList:s,userInfo:t}):(n.message="can not found experiment: "+r+" config",n)}function x(e){var t=e.expConfig,r=e.trafficSourceExperiments,n=e.whiteList,a=e.userInfo,s=e.loopCount,u=void 0===s?0:s,c=w({},_);if(u>10)return c.message="experiment config invalid, there is a loop call",c;var p=a.diversionKey,l=t.gatingKey,f=t.variants,d=void 0===f?[]:f;if(n){var h=n.gatingKeyWhitelist,g=((void 0===h?{}:h)[l.id]||{}).members;if(g){var b=g[p];if(b){var E=d.find((function(e){return e.id===b}));return E&&E.name?(c.treatment=E.name,c.variantId=E.id,c.params=E.params||{},c.message="current user hit whiteList config",c):(c.message="hit exclusive experiment whitelist",c)}}}var S=l.trafficSourceExpTestKey,O=l.trafficSourceVariantId;if(S){var R=r.find((function(e){return e.testKey===S}));if(!R)return c.message="can not found parent experiment:"+S+" config",c;var T=x({expConfig:R,trafficSourceExperiments:r,userInfo:a,whiteList:n,loopCount:u++}),A=T.variantId,I=T.segmentID;if(O!==A)return I?(c.message="can not hit parent experiment:"+S+" variant",c):(c.message="can not hit parent experiment:"+S+" segment",c)}if(l){var C=function(e,t){var r=e.hashId,n=e.id,i=m(t.diversionKey,r||n);return o[v](i)}(l,a);if(!l.ratioRanges.some((function(e){var t=Math.min.apply(null,e),r=Math.max.apply(null,e);return C>=t&&C<=r})))return c.message="can not hit experiment gatingKey",c}var N=function(e,t){var r=e.segments,n=y({},t.DiversionCondition,{whitelist:t.diversionKey});return r.find((function(e){return e.filterConditions.every((function(e){var t=e.fieldName,r=e.type,o=e.fieldValues;if(!n.hasOwnProperty(t))return!1;var a=n[t];switch(r){case"$in":return o.includes(a);case"$re":return new RegExp("^"+o[0]).test(a);case"$eq":return a===o[0];case"$gt":return i(a,o[0])>0;case"$gte":return i(a,o[0])>=0;case"$lt":return i(a,o[0])<0;case"$lte":return i(a,o[0])<=0;case"$nin":return!o.includes(a);case"$neq":return a!==o[0]}return!1}))}))}(t,a);if(N){var k=N.id,q=N.groups;c.segmentID=k;var L=parseInt(function(e,t){var r=e.hashId,n=m(t.diversionKey,r);return o[v](n)}(t,a));c.remainder=L;var j=function(e,t){return e.find((function(e){var r=e.ratioRanges,n=e.ratioRangesWithVersion;return n?n.some((function(e){return t>=e.low&&t<=e.high})):r.some((function(e){var r=Math.min.apply(null,e),n=Math.max.apply(null,e);return t>=r&&t<=n}))}))}(q,L);if(j&&j.name){c.treatment=j.name,c.treatmentID=j.id;var P=j.ratioRangesWithVersion;P&&(c.rangeInfo=function(e,t){return e.find((function(e){return t>=e.low&&t<=e.high}))}(P,L));var D=d.find((function(e){return e.name===j.name}));return D&&(c.variantId=D.id,c.params=D.params||{}),c.message="experiment group allocate succeed",c}return c.message="can not hit experiment group",c}return c.message="can not hit experiment segment",c}function E(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}function S(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var r={};return e.replace(/([^?&]+)=([^?&]+)/g,(function(e,n,o){return t?r[decodeURIComponent(n)]=decodeURIComponent(o):r[n]=o,o+"="+n})),r}var O=3e5,R="dp_abtest_config_",T="/sc.dataphant.abtest.track",A={sdkInvoked:"exp_invoked",resultSucceed:"exp_treatment",resultFailed:"exp_failed"},I="__DP_ABTEST__",C="dp_abtest_params";function N(e,t){var r,n;if(void 0===e&&(e=""),void 0===t&&(t=null),e){t&&(e+="&"+E(t));var o="ext="+encodeURIComponent(e),i=null!==(n=null===(r=null===window||void 0===window?void 0:window.goldlog)||void 0===r?void 0:r.record)&&void 0!==n?n:null;if(i)i(T,"EXP",o,"GET");else(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[T,"CLK",o,"GET"]})}}var k=function(){var e,t;return!!S(null!==(t=null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.search)&&void 0!==t?t:"",!0).debug},q={getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){return localStorage.setItem(e,t)}},L=r(5),j=r.n(L);function P(e,t){return void 0===t&&(t={}),j()(e,t)}var D=r(6),M=r(7);function J(){var e="",t="",r="",n="",o="",i="",a=document.cookie,s=D.parse(a),u=s.cna,c=s.sc_g_cfg_f,p=s.intl_locale,l=s.xman_us_f,f=s.xman_us_t,d=s.xman_i,h=s.ali_apache_track;if(h){var g=S(h.replace(/\|/g,"&")).mid;e=void 0===g?"":g}else if(f){var v=S(f).x_lid;e=void 0===v?"":v}if(d){var y=S(d).aid;r=void 0===y?"":y}if(c){var m=S(c).sc_b_locale;i=void 0===m?"":m}else p&&(i=p);if(l){var w=S(l),_=w.x_user,b=void 0===_?"":_,x=w.x_locale,E=void 0===x?"":x;if(b){var O=b.split("|");t=O[O.length-1]||"",o=O[0]||""}i||(i=E)}i&&(n=i.split("_")[0]||"",/^zh/.test(i)&&(n="zh-Hans",/(hk|tw)$/gi.test(i)&&(n="zh-Hant")),/^iw/.test(i)&&(n="he"));return{cna:u,loginId:e,accountId:t,aliId:r,language:n,country:o,platform:"web",channel:"",version:""}}function B(e){return new Promise((function(t){return e?M.request({api:"mtop.alibaba.uicservice.queryIdMsg",v:"1.0",appKey:"24889839",data:{hid:e},dataType:"json"}).then((function(r){var n=(r.data||{}).aliMemberHid;t(n||e)}),(function(){t(e)})):t(e)}))}var U={code:0,message:"success"},K={code:1,message:"illegal argument"},F={code:3,message:"xs client internal error"};function H(e){var t="function"==typeof Map?new Map:void 0;return H=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return W(e,arguments,z(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),G(n,e)},H(e)}function W(){return(W=V()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&G(o,r.prototype),o}).apply(null,arguments)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var X,$,Z,Y,Q=function(e){var t,r;function n(t,r){var n=e.call(this,t)||this;return n.code=r||K.code,n}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,G(t,r),n}(H(Error)),ee=r(8),te=r.n(ee),re=r(0),ne=function(){var e=J().cna;(X=new te.a({bid:"dataphant-js-sdk",uid:e,rel:re.version,plugins:[]})).install()},oe=function(e){var t=J(),r=t.loginId,n=t.aliId,o=t.cna,i=e.category,a=e.msg,s=e.w_succ,u=e.resInfo,c=e.userInfo,p=u.appName,l=u.testKey,f=u.expVer,d=u.segmentID,h=u.bucketName,g={category:i||100,msg:a,w_succ:s,c1:l,c2:u.sdkVer,c3:r,c4:n,c5:o,c6:p,c7:f,c8:d,c9:h,bl1:JSON.stringify(u),bl2:JSON.stringify(c),bl3:JSON.stringify(t)};X&&X.report(g)};!function(e){e.BUYER_ID="buyerId",e.SELLER_ID="sellerId",e.BUYER_ALI_ID="buyerAliId",e.SELLER_ALI_ID="sellerAliId",e.DEVICE_ID="deviceId",e.COOKIE_ID="cookieId",e.SALE_ID="saleId",e.REQUEST_ID="requestId",e.USER_ID="userId"}($||($={})),function(e){e.ACCOUNT_ID="accountId",e.ALI_ID="aliId",e.DEVICE_ID="deviceId",e.COOKIE_ID="cookieId",e.REQUEST_ID="eachRequest"}(Z||(Z={})),function(e){e.EDITING="\u7f16\u8f91\u4e2d",e.AUDITING="\u5ba1\u6838\u4e2d",e.RUNNING="\u8fd0\u884c\u4e2d",e.OFFLINE="\u5df2\u4e0b\u7ebf"}(Y||(Y={}));function ie(){ie=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:b(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function d(){}function h(){}var g={};u(g,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(R([])));y&&y!==t&&r.call(y,i)&&(g=y);var m=h.prototype=f.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,i,a,s){var u=p(e[n],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,l;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=h,n(m,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=u(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),u(m,s,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}var ae=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},se=function(){function e(e){this.appName=e.appName,this.testKey=e.testKey,this.diversionKey=e.diversion||"",this.DiversionCondition=e.filters||{},this.Storage=q,this.Request=P,ne()}var t=e.prototype;return t.getTreatment=function(){return ae(this,void 0,void 0,ie().mark((function e(){var t,r,n,o,i,a,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r={},e.prev=2,this.validateRequest(),this.recordExpInvoked(),e.next=7,Promise.all([this.getAppExpConfig(),this.getWhiteList()]);case 7:return n=e.sent,this.appExpConfig=Object.assign(Object.assign({},n[0]),{whiteList:n[1]}),this.validateExpConfig(),e.next=12,this.getUserInfo();case 12:this.userInfo=e.sent,r=b(this.appExpConfig,this.userInfo,this.testKey),i=(o=r).treatment,a=o.message,s=void 0===a?"":a,i?(t=this.setExpSucceedResult(r),this.recordExpResultSucceed(t)):(t=this.setExpFailedResult(U.code,s),this.recordExpFailed(t)),this.saveGlobalExpResult(t),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(2),u=e.t0 instanceof Q?e.t0.code:F.code,t=this.setExpFailedResult(u,e.t0.message),this.recordExpFailed(t);case 24:return this.expResult=t,this.afterAllocate(),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,this,[[2,19]])})))},t.validateRequest=function(){if(!this.appName)throw new Q("Missing required parameter: appName");if(!this.testKey)throw new Q("Missing required parameter: testKey")},t.validateExpConfig=function(){var e=this,t=this.appExpConfig.experiments;if(!t)throw new Q("appName: "+this.appName+" not found.");var r=t.find((function(t){return t.testKey===e.testKey}));if(!r)throw new Q("Experiment: "+this.testKey+" not found. Please confirm whether the experiment has been launched.");this.expConfig=r},t.getAppExpConfig=function(){return ae(this,void 0,void 0,ie().mark((function e(){var t,r,n,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},r=O,!((n=this.getExpConfigFromCache())&&Date.now()-n.updateAt<r)){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,this.getExpConfigFromRemote();case 7:return(t=e.sent).updateAt=Date.now(),o=this.getExpLocalKey(),this.Storage.setItem(o,JSON.stringify(t)),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})))},t.getExpConfigFromCache=function(){var e=this.getExpLocalKey(),t=this.Storage.getItem(e);return t?JSON.parse(t):null},t.getExpLocalKey=function(){return""+R+this.appName},t.getExpConfigFromRemote=function(){return ae(this,void 0,void 0,ie().mark((function e(){var t,r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appName:this.appName},o=void 0,o=n.appName,t=o?g+"/"+o:""){e.next=3;break}throw new Q("Failed to get experiment remote url",F.code);case 3:return e.next=5,P(t).then((function(e){if(e){if(200===e.status)return e.json();throw new Q("Failed to get experiment:"+r.testKey+" configuration from remote",e.status)}}),(function(){throw new Q("Failed to get experiment:"+r.testKey+" configuration from remote",F.code)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}var n,o}),e,this)})))},t.getWhiteList=function(){return ae(this,void 0,void 0,ie().mark((function e(){var t,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={appName:this.appName},o=void 0,o=n.appName,t=o?g+"/whitelist/"+o:"",e.next=4,P(t);case 4:if(!(r=e.sent)){e.next=8;break}if(200!==r.status){e.next=8;break}return e.abrupt("return",r.json());case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}var n,o}),e,this,[[0,10]])})))},t.getUserInfo=function(){return ae(this,void 0,void 0,ie().mark((function e(){var t,r,n,o,i,a,s,u,c,p,l,f,d,h;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=J(),r=t.platform,n=t.country,o=t.channel,i=t.language,a=t.version,s=t.loginId,u=t.aliId,c=t.cna,p=null,l=this.expConfig,f=l.keyType,d=l.sampleType,!this.diversionKey){e.next=8;break}p=""+this.diversionKey,e.next=31;break;case 8:e.t0=d,e.next=e.t0===Z.ACCOUNT_ID?11:e.t0===Z.ALI_ID?13:e.t0===Z.DEVICE_ID||e.t0===Z.COOKIE_ID?21:(e.t0,Z.REQUEST_ID,27);break;case 11:return p=s,e.abrupt("break",29);case 13:if(f!==$.SELLER_ALI_ID){e.next=19;break}return e.next=16,B(u);case 16:p=e.sent,e.next=20;break;case 19:p=u;case 20:return e.abrupt("break",29);case 21:if(p=c){e.next=26;break}return e.next=25,new Promise((function(e){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.aplus_pubsub.subscribe",arguments:["CNA",function(t){var r=t.value;e(r||"")}]})}));case 25:p=e.sent;case 26:return e.abrupt("break",29);case 27:return p=null,e.abrupt("break",29);case 29:if(p){e.next=31;break}throw new Q("Missing keyType: ["+f+"] required parameter: [diversion]");case 31:return h={platform:r,country:n,channel:o,language:i,version:a},e.abrupt("return",{diversionKey:p,DiversionCondition:Object.assign(Object.assign({},h),this.DiversionCondition)});case 33:case"end":return e.stop()}}),e,this)})))},t.saveGlobalExpResult=function(e){var t,r,n,o=I,i=C,a=window[o]||{},s=e.treatment;s&&(window[o]=Object.assign(Object.assign({},a),((t={})[this.testKey]=s,t)),(r={})[i]=encodeURIComponent(E(window[o])),n=r,(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.appendMetaInfo",arguments:["aplus-exdata",Object.assign({},n)]}))},t.setExpSucceedResult=function(e){return Object.assign({success:!0,code:U.code,message:U.message},e)},t.setExpFailedResult=function(e,t){return{success:!1,code:e,message:t}},t.afterAllocate=function(){k()&&(console.group("%c\u5b9e\u9a8c\u540d\u79f0"+this.testKey,"color: #CC3300"),console.log("%c\u5b9e\u9a8c\u914d\u7f6e%c"+JSON.stringify(this.expConfig),"color: #339966",""),console.log("%c\u7528\u6237\u4fe1\u606f%c"+JSON.stringify(this.userInfo),"color: #3366CC",""),console.log("%c\u5206\u6d41\u7ed3\u679c%c"+JSON.stringify(this.expResult),"color: #990099",""),console.groupEnd())},t.recordExpInvoked=function(){var e={appName:this.appName,testKey:this.testKey,sdkVer:re.version};N(A.sdkInvoked,e)},t.recordExpResultSucceed=function(e){var t=e.segmentID,r=void 0===t?null:t,n=e.treatmentID,o=void 0===n?null:n,i=e.treatment,a=void 0===i?"":i,s=e.rangeInfo,u=this.appExpConfig.envType,c=void 0===u?"":u,p=this.expConfig,l=p.id,f=p.releaseId,d=p.keyType,h=this.userInfo.diversionKey,g=s?s.releaseId:f,v=s?s.version:"",y={expID:l,expVer:g,segmentID:r,bucketID:o,diverKey:h,keyType:d,expTime:+new Date,sdkVer:re.version,appName:this.appName,testKey:this.testKey,bucketName:a,releaseVer:v,envType:c};null!==r&&null!==o&&N(A.resultSucceed,y),oe({category:100,msg:"experiment allocated succeed",w_succ:1,resInfo:y,userInfo:this.userInfo||{}})},t.recordExpFailed=function(e){var t,r,n,o,i=e.code,a=void 0===i?-1:i,s=e.message,u=void 0===s?"":s,c={code:a,message:u,appName:this.appName,testKey:this.testKey,expID:null!==(r=null===(t=this.expConfig)||void 0===t?void 0:t.id)&&void 0!==r?r:"",expVer:null!==(o=null===(n=this.expConfig)||void 0===n?void 0:n.releaseId)&&void 0!==o?o:"",sdkVer:re.version};N(A.resultFailed,c),oe({category:100,msg:u,w_succ:0,resInfo:c,userInfo:this.userInfo||{}})},e}();t.default=se;function ue(e){return new se(e).getTreatment()}window.Dataphant={getTreatment:ue}}]);