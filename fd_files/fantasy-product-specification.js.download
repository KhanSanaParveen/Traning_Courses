(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{240:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(0),o=h(i),c=h(n(404)),a=h(n(30)),u=h(n(8)),l=n(18),d=h(n(2)),s=h(n(39)),f=h(n(406)),p=n(233);function h(t){return t&&t.__esModule?t:{default:t}}function m(t,e,n,r,i,o,c){try{var a=t[o](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(409);var A=!1,x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(h,t);var e,n,r,s=y(h);function h(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),E(_(e=s.call(this,t)),"$container",null),E(_(e),"state",{autoHight:0,productHtmlDescription:"",productDescriptionType:""});var n=t.productId,r=t.shopLibVer,i=t.crossdomainToken;return e.ref=o.default.createRef(),window.pageConfig={productId:n,shopLibVer:r,host_token:i,detailFileName:"detail-new"},e}return e=h,(n=[{key:"componentDidMount",value:function(){var t=this;this.fetchDescription(),document.addEventListener("scroll",(function(t){window.scrollY>3900&&!1===A&&((0,u.default)("/sc.details.scrollCheckTop","EXP"),A=!0)}));var e=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getTreatment)({appName:"detail-screen",testKey:"pc_detail_describe_test"});case 2:n=e.sent,r=n.success,i=n.treatment,r&&(o=parseInt(i))&&(t.setState({autoHight:o}),a.default.trigger("productDescribeTest",{text:i}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function c(t){m(o,r,i,c,a,"next",t)}function a(t){m(o,r,i,c,a,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();a.default.on("productSpecification:loaded",(function(){var t;(null===(t=document.getElementById("block-tab-product"))||void 0===t?void 0:t.clientHeight)>3900&&((0,u.default)("/sc.details.autoHideExpand","EXP"),e())}))}},{key:"removeNavigation",value:function(t,e,n){if(!t)return n.replace(/src=\"(.[^"]*)/gi,(function(t){return t.replace(/[<>]/gi,"")}));var r;if("desc_v_1"===t?r={"products description":!0,"product description":!0}:"desc_v_2"===t&&(r={"company profile":!0}),!r)return n;var i=document.createElement("DIV");return i.innerHTML=n,"magicEdit"===e?Array.from(i.querySelectorAll("div[module-title=detailProductNavigation]")).filter((function(t){if(t&&t.children.length>0){var e=t.children[0],n=e.textContent||e.innerTEXT||"";return r[n.toLowerCase()]}return!1})).forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})):Array.from(i.querySelectorAll("div[class=mceSectionContainer]")).filter((function(t){if(t&&t.getAttribute){var e=t.getAttribute("data-section-title")||"";return r[e.toLocaleLowerCase()]}return!1})).forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})),i.innerHTML}},{key:"fetchDescription",value:function(){var t=this,e=this.props,n=e.productId,r=e.language;fetch("/event/app/mainAction/desc.htm?detailId=".concat(n,"&language=").concat("string"==typeof r?r:"")).then((function(t){return t.json()})).then((function(e){if(e.success){var r=e.data,i=e.bucketKey,o=r.productDescriptionType,u=r.productHtmlDescription;u=t.removeNavigation(i,o,u);var l="magicEdit"===o,d="";if(l){var s=document.createElement("DIV");if(s.innerHTML=u,s.children&&s.children.length>1){var p=s.children[0];p&&"detail_decorate_root"===p.id&&Array.from(s.children).slice(1).forEach((function(t){"J_module"===t.className&&p.appendChild(t)})),d=s.innerHTML}}t.setState({productHtmlDescription:d||u,productDescriptionType:o},(function(){(0,c.default)(t.$container,{maxWidth:t.$container.clientWidth,isMagicEdit:l}),a.default.trigger("productSpecification:loaded"),window.__PROMOTION_BOOTSTRAP__&&window.__PROMOTION_BOOTSTRAP__("detail-banner-below"),l&&(0,f.default)({productId:n})}))}}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.productHtmlDescription,r=e.productDescriptionType,c=e.autoHight,a=this.props.i18n,s="magicEdit"===r;return o.default.createElement(i.Fragment,null,o.default.createElement("div",{id:"J-rich-text-description",style:{maxHeight:c||"inherit"},className:(0,d.default)("richtext richtext-detail rich-text-description",{"auto-hide":!!c},{"is-magic":s}),ref:function(e){t.$container=e},dangerouslySetInnerHTML:{__html:n}}),!!c&&o.default.createElement("div",{className:"more-button","data-exp":"auto-explord",ref:this.ref},o.default.createElement(l.Button,{type:"primary",size:"large",onClick:function(){(0,u.default)("/sc.details.autoHideBtn","CLK"),t.setState({autoHight:0})}},a.detail_pc_fold_details)))}}])&&g(e.prototype,n),r&&g(e,r),h}(i.PureComponent);E(x,"propTypes",{productId:s.default.number,language:s.default.string,crossdomainToken:s.default.string,shopLibVer:s.default.string}),e.default=x},404:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.querySelectorAll("img[data-src]"),r=Array.prototype.slice.call(n,null),i=e.maxWidth,o=e.isMagic;(0,c.default)(r,{maxWidth:i,isMagic:o}),u(r),r.forEach((function(t){t.addEventListener("load",a)}))};var r,i=n(35),o=n(405),c=(r=o)&&r.__esModule?r:{default:r};function a(t){var e=t.currentTarget,n=e.getAttribute("data-alt"),r=e.getAttribute("data-title"),i=e.getAttribute("data-style");function o(t,e,n){n&&t.setAttribute(e,n)}o(e,"alt",n),o(e,"title",r),o(e,"style",i)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==t.length){var e=(0,i.debounce)(n,300);window.addEventListener("scroll",e)}function n(){window.innerHeight;t.forEach((function(t){var e=t.getAttribute("data-src");t.src.indexOf("img-placeholder")>0&&t.setAttribute("src",e)}))}}},405:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxWidth||999999;t.forEach((function(t){e.isMagic||(t.style["max-width"]=n),t.onload=function(){100===this.naturalHeight&&100===this.naturalWidth&&(this.src=imgSrc,t.onload=null)};var r,i,l=parseInt(t.getAttribute("ori-width"),10),d=parseInt(t.getAttribute("ori-height"),10),s=parseInt(t.style.width,10)||t.getAttribute("width")||o(t.getAttribute("data-width")),f=parseInt(t.style.height,10)||t.getAttribute("height")||o(t.getAttribute("data-height"));(l||d||s||f)&&(c(s)||c(f)?a(t,[s,f]):(i=s&&f?s>n?l&&d?u(l,d,n,null):[n,f/(s/n)]:[s,f]:s&&!f?u(l,d,Math.min(s,n),null):!s&&f?(r=u(l,d,null,f)[0])>n?u(l,d,n,null):[r,f]:l>n?u(l,d,n,null):[l,d],a(t,i)))}))};var r=new RegExp(/(^[\d.]+$)|(^[\d.]+%$)/),i=new RegExp(/[\d.]+%/);function o(t){return r.test(t)?t:null}function c(t){return i.test(t)}function a(t,e){e&&(t.style.width.indexOf("%")>0||(e[0]&&(t.style.width="".concat(e[0],"px"),t.setAttribute("width",e[0])),e[1]&&(t.style.height="".concat(e[1],"px"),t.setAttribute("height",e[1]))))}function u(t,e,n,r){if(n&&r||!t||!e)return[n,r];var i=t/e;return n?[n,r=n/i]:r?[n=r*i,r]:void 0}},406:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.productId,n=window._magicEditConfig||{};window._magicEditConfig=n,n.productId="".concat(e),n.modules={css:["icbu-detail-edit/icbu-mod-lib/0.0.26/no-next.css"],js:["icbu-detail-edit/icbu-mod-lib/0.0.28/index.js"]},window.__moduleVersions=[{name:"detailSellerRecommend",version:"0.0.14",enabled:!0}],(0,i.loadJsAsync)("//s.alicdn.com/@g/assets-group/magic-edit-loader/".concat((0,c.default)(window,"__version__map.magicEditLoaderVersion"),"/envs/pc/index.js"))};var r,i=n(407),o=n(408),c=(r=o)&&r.__esModule?r:{default:r}},407:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadJsAsync=function(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e)},e.loadCssAsync=function(t){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.body.appendChild(e)}},408:function(t,e,n){"use strict";function r(t,e){try{return t[e]}catch(t){return null}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n,i=e.split("."),o=t;(n=i.shift())&&null!==o;)o=r(o,n);return o}},409:function(t,e,n){}}]);